/*
 Copyright Â© 2012-2015 The plugÂ³ Team and other contributors
 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program. If not, see http://www.gnu.org/licenses/.
*/
var plugCubed;
"undefined"!==typeof plugCubed&&plugCubed.close();
define("d2154c/e46bab",[],function(){var b,e,a;
b=!1;
e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;
a=function(){};
a.extend=function(a){function c(){!b&&this.init&&this.init.apply(this,arguments)}var g=this.prototype;
b=!0;
var f=new this;
b=!1;
for(var k in a)a.hasOwnProperty(k)&&("function"==typeof a[k]&&"function"==typeof g[k]&&e.test(a[k])?f[k]=function(a,b){return function(){var c=this._super;this._super=g[a];
var f=b.apply(this,arguments);
this._super=c;
return f}}(k,a[k]):f[k]=a[k]);
c.prototype=f;
c.prototype.constructor=c;
c.extend=arguments.callee;
return c};
return a});
define("d2154c/c41231/c49db9",["jquery","d2154c/e46bab"],function(b,e){return e.extend({triggerHandlers:[],trigger:void 0,registered:!1,init:function(){var a;
0<this.triggerHandlers.length&&this.close();
this.triggerHandlers=[];
if(null==this.trigger)throw Error("Missing TriggerHandler trigger!");
if("string"===typeof this.trigger)this.triggerHandlers[this.trigger]=this.handler;
else if(b.isArray(this.trigger))for(a in this.trigger)this.trigger.hasOwnProperty(a)&&(this.triggerHandlers[this.trigger[a]]="function"===typeof this[this.trigger[a]]?this[this.trigger[a]]:this.handler);
else if(b.isPlainObject(this.trigger))for(a in this.trigger)this.trigger.hasOwnProperty(a)&&(this.triggerHandlers[a]=this.trigger[a])},register:function(){for(var a in this.triggerHandlers)if(this.triggerHandlers.hasOwnProperty(a))if("function"===typeof this.triggerHandlers[a])API.on(a,this.triggerHandlers[a],this);
else if("function"===typeof this[this.triggerHandlers[a]])API.on(a,this[this.triggerHandlers[a]],this);
this.registered=!0},close:function(){for(var a in this.triggerHandlers)this.triggerHandlers.hasOwnProperty(a)&&("function"===typeof this.triggerHandlers[a]?(API.off(a,this.triggerHandlers[a],this),delete this.triggerHandlers[a]):"function"===typeof this[this.triggerHandlers[a]]&&(API.off(a,this[this.triggerHandlers[a]],this),delete this[this.triggerHandlers[a]]));
this.registered=!1}})});
define("d2154c/f74646",["jquery","d2154c/e46bab"],function(b,e){var a,h,c;
a={};
h={};
return new (e.extend({curLang:"en",defaultLoaded:!1,loaded:!1,init:function(){c=this;
b.getJSON("https://d1rfegul30378.cloudfront.net/files/lang.json?_"+Date.now(),function(a){c.allLangs=a}).done(function(){1===c.allLangs.length&&API.chatLog("Error loading language informations for plugCubed",!0);
c.loadDefault()}).fail(function(){API.chatLog("Error loading language informations for plugCubed",!0);
c.loadDefault()})},loadDefault:function(){b.getJSON("https://d1rfegul30378.cloudfront.net/files/langs/lang.en.json?_"+Date.now(),function(a){h=a;c.defaultLoaded=!0}).error(function(){setTimeout(function(){c.loadDefault()},500)})},load:function(e){if(this.defaultLoaded){var f=API.getUser().language;
!f||"en"===f||0>this.allLangs.indexOf(f)?(a={},b.extend(!0,a,h),this.curLang="en",this.loaded=!0,"function"===typeof e&&e()):b.getJSON("https://d1rfegul30378.cloudfront.net/files/langs/lang."+f+".json?_"+Date.now(),function(k){a={};
b.extend(!0,a,h,k);
c.curLang=f;
c.loaded=!0;
"function"===typeof e&&e()}).error(function(){console.log("[plugÂ³] Couldn't load language file for "+f);
a={};
b.extend(!0,a,h);
c.curLang="en";
c.loaded=!0;
"function"===typeof e&&e()})}else setTimeout(function(){c.load(e)},500)},i18n:function(c){var f=a,e;
if(null==f||null==c)return"{"+b.makeArray(arguments).join(", ")+"}";
var m=c.split(".");
for(e in m)if(m.hasOwnProperty(e)){if(null==f[m[e]])return"{"+b.makeArray(arguments).join(", ")+"}";
f=f[m[e]]}if(1<arguments.length)for(e=1;
e<arguments.length;
e++)f=f.split("%"+e).join(arguments[e]);
return f},allLangs:[{file:"en",name:"English"}]}))});
var plugCubedUserData;
define("d2154c/e2f884",["d2154c/e46bab","d2154c/f74646","lang/Lang"],function(b,e,a){var h,c,g,f,k,m,p,n,t,l,q,r,u;
h=function(d,a,b){if(null==d)return"";
var c,f=[];
$.isArray(a)&&(f=a);
b&&$.isArray(b)||(b=[]);
c=$("span div table tr td br br/ strong em a".split(" ").concat(b)).not(f).get();
"*"===a&&(c=[]);
d=d.split("&#8237;").join("&amp;#8237;").split("&#8238;").join("&amp;#8238;");
return d.replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(d,a){return-1<c.indexOf(a.toLowerCase())?d:""})};
c=g=f=k=m=p=n=t=[];
l={};
u=!requirejs.defined("c84be/a25d9/fde34");
u||(q=require("c84be/c1f5e/a3af9/cbc3b/fa74e"),require("c84be/e6d1b/e6d87"),r=require("c84be/cfd90/a6e63"));$.getJSON("https://d1rfegul30378.cloudfront.net/titles.json",function(d){c=d.developer?d.developer:[];g=d.sponsor?d.sponsor:[];l=d.special?d.special:{};f=d.ambassador?d.ambassador:[];d.donator&&(k=d.donator.diamond?d.donator.diamond:[],m=d.donator.platinum?d.donator.platinum:[],p=d.donator.gold?d.donator.gold:[],n=d.donator.silver?d.donator.silver:
[],t=d.donator.bronze?d.donator.bronze:[])});return new (b.extend({runLite:u,proxifyImage:function(d){return this.startsWithIgnoreCase(d,"http://")?"https://api.plugCubed.net/proxy/"+d:d},httpsifyURL:function(d){return this.startsWithIgnoreCase(d,"http://")?"https://"+d.substr(7):d},getHighestRank:function(d){d||(d=API.getUser().id);return this.isPlugCubedDeveloper(d)?"developer":this.isPlugCubedSponsor(d)?"sponsor":this.isPlugCubedSpecial(d)?"special":this.isPlugCubedAmbassador(d)?"ambassador":this.isPlugCubedDonatorDiamond(d)?
"donatorDiamond":this.isPlugCubedDonatorPlatinum(d)?"donatorPlatinum":this.isPlugCubedDonatorGold(d)?"donatorGold":this.isPlugCubedDonatorSilver(d)?"donatorSilver":this.isPlugCubedDonatorBronze(d)?"donatorBronze":null},getHighestRankString:function(d){var a=this.getHighestRank(d);return null!=a?this.isPlugCubedSpecial(d)?e.i18n("info.specialTitles.special",this.getPlugCubedSpecial(d).title):e.i18n("info.specialTitles."+a):""},havePlugCubedRank:function(d){return this.isPlugCubedDeveloper(d)||this.isPlugCubedSponsor(d)||
this.isPlugCubedSpecial(d)||this.isPlugCubedAmbassador(d)||this.isPlugCubedDonatorDiamond(d)||this.isPlugCubedDonatorPlatinum(d)||this.isPlugCubedDonatorGold(d)||this.isPlugCubedDonatorSilver(d)||this.isPlugCubedDonatorBronze(d)},getAllPlugCubedRanks:function(d,b){var c=[];this.isPlugCubedDeveloper(d)&&c.push(e.i18n("info.specialTitles.developer"));this.isPlugCubedSponsor(d)&&c.push(e.i18n("info.specialTitles.sponsor"));this.isPlugCubedSpecial(d)&&c.push(e.i18n("info.specialTitles.special",this.getPlugCubedSpecial(d).title));
this.isPlugCubedAmbassador(d)&&c.push(e.i18n("info.specialTitles.ambassador"));this.isPlugCubedDonatorDiamond(d)&&c.push(e.i18n("info.specialTitles.donatorDiamond"));this.isPlugCubedDonatorPlatinum(d)&&c.push(e.i18n("info.specialTitles.donatorPlatinum"));this.isPlugCubedDonatorGold(d)&&c.push(e.i18n("info.specialTitles.donatorGold"));this.isPlugCubedDonatorSilver(d)&&c.push(e.i18n("info.specialTitles.donatorSilver"));this.isPlugCubedDonatorBronze(d)&&c.push(e.i18n("info.specialTitles.donatorBronze"));
b||(this.hasPermission(d,5,!0)?c.push(a.roles.admin):this.hasPermission(d,4,!0)?c.push(a.roles.leader):this.hasPermission(d,3,!0)?c.push(a.roles.ambassador):this.hasPermission(d,2,!0)?c.push(a.roles.volunteer):this.hasPermission(d,API.ROLE.HOST)?c.push(a.roles.host):this.hasPermission(d,API.ROLE.COHOST)?c.push(a.roles.cohost):this.hasPermission(d,API.ROLE.MANAGER)?c.push(a.roles.manager):this.hasPermission(d,API.ROLE.BOUNCER)?c.push(a.roles.bouncer):this.hasPermission(d,API.ROLE.DJ)&&c.push(a.roles.dj));
return c.join(" / ")},isPlugCubedDeveloper:function(d){d||(d=API.getUser().id);return-1<c.indexOf(d)},isPlugCubedSponsor:function(d){d||(d=API.getUser().id);return-1<g.indexOf(d)},isPlugCubedSpecial:function(d){d||(d=API.getUser().id);return null!=this.getPlugCubedSpecial(d)},isPlugCubedAmbassador:function(d){d||(d=API.getUser().id);return-1<f.indexOf(d)},isPlugCubedDonatorDiamond:function(d){d||(d=API.getUser().id);return-1<k.indexOf(d)},isPlugCubedDonatorPlatinum:function(d){d||(d=API.getUser().id);
return-1<m.indexOf(d)},isPlugCubedDonatorGold:function(d){d||(d=API.getUser().id);return-1<p.indexOf(d)},isPlugCubedDonatorSilver:function(d){d||(d=API.getUser().id);return-1<n.indexOf(d)},isPlugCubedDonatorBronze:function(d){d||(d=API.getUser().id);return-1<t.indexOf(d)},getPlugCubedSpecial:function(d){d||(d=API.getUser().id);return l[d]},cleanHTML:function(d,a,b){return h(d,a,b)},cleanTypedString:function(d){return d.split("<").join("&lt;").split(">").join("&gt;")},chatLog:function(d,a,b,c,f){var e,
m,g,k,p,n,l;if(a){"string"!==typeof a&&(a=a.html());a=h(a);n=$("<span>").html(a);a=!u&&q._window?$(q._window.document).find("#chat-messages"):$("#chat-messages");e=a.scrollTop()>a[0].scrollHeight-a.height()-20;m=$("<div>").addClass(d?d:"message");g=$("<div>").addClass("badge-box").data("uid",c?c:"p3");l=$("<div>").addClass("from").append($("<span>").addClass("un"));k=$("<div>").addClass("msg").append(l);p=$("<span>").addClass("text").append(n);"system"===d?g.append('<i class="icon icon-chat-system"></i>'):
(g.append('<i class="icon icon-plugcubed"></i>'),n.css("color",this.toRGB(b&&this.isRGB(b)?b:"d1d1d1")));if(c){d=API.getUser(c);b=$("#chat-messages").find(".message").last();var t=b.children(".badge-box").data("uid");if(null!=d&&null!=d.username){if(t==d.id){b.find(".text").append("<br>").append(n);a.scrollTop()>a[0].scrollHeight-a.height()-b.find(".text").height()&&a.scrollTop(a[0].scrollHeight);return}l.find(".un").html(h(d.username));this.hasPermission(d.id,API.ROLE.HOST,!0)?(m.addClass("from-admin"),
l.addClass("admin").append('<i class="icon icon-chat-admin"></i>')):this.hasPermission(d.id,API.ROLE.BOUNCER,!0)?(m.addClass("from-ambassador"),l.addClass("ambassador").append('<i class="icon icon-chat-ambassador"></i>')):this.hasPermission(d.id,API.ROLE.BOUNCER)?(l.addClass("staff"),this.hasPermission(d.id,API.ROLE.HOST)&&m.addClass("from-host"),this.hasPermission(d.id,API.ROLE.COHOST)?(m.addClass("from-cohost"),l.append('<i class="icon icon-chat-host"></i>')):this.hasPermission(d.id,API.ROLE.MANAGER)?
(m.addClass("from-manager"),l.append('<i class="icon icon-chat-manager"></i>')):this.hasPermission(d.id,API.ROLE.BOUNCER)&&(m.addClass("from-bouncer"),l.append('<i class="icon icon-chat-bouncer"></i>'))):this.hasPermission(d.id,API.ROLE.DJ)?(m.addClass("from-dj"),l.addClass("dj").append('<i class="icon icon-chat-dj"></i>')):d.id==API.getUser().id&&(m.addClass("from-you"),l.addClass("you"))}else if(0>c){if(l.find(".un").html("plug&#179;"),t==c){b.find(".text").append("<br>").append(n);a.scrollTop()>
a[0].scrollHeight-a.height()-b.find(".text").height()&&a.scrollTop(a[0].scrollHeight);return}}else l.find(".un").html(f?h(f):"Unknown")}else l.find(".un").html("plug&#179;");a.append(m.append(g).append(k.append(p)));e&&a.scrollTop(a[0].scrollHeight)}},getRoomID:function(){return document.location.pathname.split("/")[1]},getRoomName:function(){return $("#room-name").text().trim()},getUserData:function(d,a,b){return null==plugCubedUserData[d]||null==plugCubedUserData[d][a]?b:plugCubedUserData[d][a]},
setUserData:function(d,a,b){null==plugCubedUserData[d]&&(plugCubedUserData[d]={});plugCubedUserData[d][a]=b},getUser:function(d){var a="number";"string"===typeof d&&(a="string",d=d.trim(),"@"===d.substr(0,1)&&(d=d.substr(1)));var b=API.getUsers(),c;for(c in b)if(b.hasOwnProperty(c))if("string"===a){if(this.equalsIgnoreCase(b[c].username,d)||this.equalsIgnoreCaseTrim(b[c].id.toString(),d))return b[c]}else if("number"===a&&b[c].id===d)return b[c];return null},getLastMessageTime:function(d){var a=Date.now()-
this.getUserData(d,"lastChat",this.getUserData(d,"joinTime",Date.now()));return!0===require("d2154c/c6f256/cb566a")._byId[d]?e.i18n("error.ignoredUser"):this.getRoundedTimestamp(a,!0)},getUserInfo:function(d){d=this.getUser(d);if(null===d)API.chatLog(e.i18n("error.userNotFound"));else{var b,c,f,m,g,h,k,p;c=API.getWaitListPosition(d.id);g=null!=API.getDJ()&&API.getDJ().id===d.id;h=a.languages[d.language];k=this.getLastMessageTime(d.id);p=this.getUserData(d.id,"disconnects",{count:0});b=this.hasPermission(d.id,
5,!0)?a.roles.admin:this.hasPermission(d.id,4,!0)?a.roles.leader:this.hasPermission(d.id,3,!0)?a.roles.ambassador:this.hasPermission(d.id,2,!0)?a.roles.volunteer:this.hasPermission(d.id,API.ROLE.HOST)?a.roles.host:this.hasPermission(d.id,API.ROLE.COHOST)?a.roles.cohost:this.hasPermission(d.id,API.ROLE.MANAGER)?a.roles.manager:this.hasPermission(d.id,API.ROLE.BOUNCER)?a.roles.bouncer:this.hasPermission(d.id,API.ROLE.DJ)?a.roles.dj:a.roles.none;m=g?e.i18n("info.djing"):-1<c?e.i18n("info.inWaitlist",
c+1,API.getWaitList().length):e.i18n("info.notInList");c=a.userStatus.online;switch(d.vote){case -1:f=e.i18n("vote.meh");break;default:f=e.i18n("vote.undecided");break;case 1:f=e.i18n("vote.woot")}g&&(f=e.i18n("vote.djing"));g=this.getAllPlugCubedRanks(d.id,!0);var l=$("<table>").css({width:"100%",color:"#CC00CC"});l.append($("<tr>").append($("<td>").attr("colspan",2).append($("<strong>").text(e.i18n("info.name")+" ")).append($("<span>").css("color","#FFFFFF").text(this.cleanTypedString(d.username)))));
""!==g&&l.append($("<tr>").append($("<td>").attr("colspan",2).append($("<strong>").text(e.i18n("info.title")+" ")).append($("<span>").css("color","#FFFFFF").html(g))));l.append($("<tr>").append($("<td>").attr("colspan",2).append($("<strong>").text(e.i18n("info.id")+" ")).append($("<span>").css("color","#FFFFFF").text(d.id))));l.append($("<tr>").append($("<td>").append($("<strong>").text(e.i18n("info.rank")+" ")).append($("<span>").css("color","#FFFFFF").text(b))).append($("<td>").append($("<strong>").text(e.i18n("info.joined")+
" ")).append($("<span>").css("color","#FFFFFF").text(this.getTimestamp(this.getUserData(d.id,"joinTime",Date.now()))))));l.append($("<tr>").append($("<td>").append($("<strong>").text(e.i18n("info.status")+" ")).append($("<span>").css("color","#FFFFFF").text(c))).append($("<td>").append($("<strong>").text(e.i18n("info.vote")+" ")).append($("<span>").css("color","#FFFFFF").text(f))));l.append($("<tr>").append($("<td>").attr("colspan",2).append($("<strong>").text(e.i18n("info.position")+" ")).append($("<span>").css("color",
"#FFFFFF").text(m))));l.append($("<tr>").append($("<td>").attr("colspan",2).append($("<strong>").text(a.languages.label+" ")).append($("<span>").css("color","#FFFFFF").text(h))));l.append($("<tr>").append($("<td>").attr("colspan",2).append($("<strong>").text(e.i18n("info.lastMessage")+" ")).append($("<span>").css("color","#FFFFFF").text(k))));l.append($("<tr>").append($("<td>").append($("<strong>").text(e.i18n("info.wootCount")+" ")).append($("<span>").css("color","#FFFFFF").text(this.getUserData(d.id,
"wootcount",0)))).append($("<td>").append($("<strong>").text(e.i18n("info.mehCount")+" ")).append($("<span>").css("color","#FFFFFF").text(this.getUserData(d.id,"mehcount",0)))));l.append($("<tr>").append($("<td>").attr("colspan",2).append($("<strong>").text(e.i18n("info.ratio")+" ")).append($("<span>").css("color","#FFFFFF").text(function(d,a){if(0===a)return 0===d?"0:0":"1:0";for(var b=1;b<=a;b++){var c=d/a*b;if(0===c%1)return c+":"+b}}(this.getUserData(d.id,"wootcount",0),this.getUserData(d.id,
"mehcount",0))))));l.append($("<tr>").append($("<td>").attr("colspan",2).append($("<strong>").text(e.i18n("info.disconnects")+" ")).append($("<span>").css("color","#FFFFFF").text(p.count))));0<p.count&&(l.append($("<tr>").append($("<td>").attr("colspan",2).append($("<strong>").text(e.i18n("info.lastPosition")+" ")).append($("<span>").css("color","#FFFFFF").text(0>p.position?"Wasn't in booth nor waitlist":0===p.position?"Was DJing":"Was "+p.position+" in waitlist")))),l.append($("<tr>").append($("<td>").attr("colspan",
2).append($("<strong>").text(e.i18n("info.lastDisconnect")+" ")).append($("<span>").css("color","#FFFFFF").text(this.getTimestamp(p.time))))));this.chatLog(void 0,$("<div>").append(l).html())}},hasPermission:function(d,a,b){return(d=API.getUser(d))&&d.id?(b?d.gRole:d.role+(0<d.gRole?5+d.gRole:0))>=a:!1},getAllUsers:function(){var d=$("<table>").css({width:"100%",color:"#CC00CC",position:"relative",left:"-25px"}),a=API.getUsers(),b;for(b in a)if(a.hasOwnProperty(b)){var c=a[b];d.append($("<tr>").append($("<td>").append(c.username)).append($("<td>").append(c.id)))}this.chatLog(void 0,
$("<div>").append(d).html())},playChatSound:function(){this.playMentionSound()},playMentionSound:function(){!u&&r.settings.chatSound&&(new Audio(require("c84be/f590f/eaa9b").sfx)).play()},getTimestamp:function(d,a){var b,c,f,e="";a||(a="hh:mm");b=d?new Date(d):new Date;c=b.getHours();f=b.getMinutes();b=b.getSeconds();1===$(".icon-timestamps-12").length&&(12>c?e=" AM":(e=" PM",c-=12),0===c&&(c=12));c=(10>c?"0":"")+c;f=(10>f?"0":"")+f;b=(10>b?"0":"")+b;return a.split("hh").join(c).split("mm").join(f).split("ss").join(b)+
e},getRoundedTimestamp:function(d,a){a&&(d=Math.floor(d/1E3));var b={week:604800,day:86400,hour:3600,minute:60,second:1},c;for(c in b)if(b.hasOwnProperty(c)){var f=b[c];if(!(d<f))return b=Math.floor(d/f),b+" "+c+(1<b?"s":"")+" ago"}return"Unknown"},formatTime:function(d){var a,b;b=Math.floor(d/60);d-=60*b;if(60>b)return(10>b?"0":"")+b+":"+(10>d?"0":"")+d;a=Math.floor(b/60);b-=60*a;return(10>a?"0":"")+a+":"+(10>b?"0":"")+b+":"+(10>d?"0":"")+d},randomRange:function(d,a){return d+Math.floor(Math.random()*
(a-d+1))},isRGB:function(d){return"string"===typeof d?/^(#|)(([0-9A-F]{6}$)|([0-9A-F]{3}$))/i.test(d):!1},toRGB:function(d){return this.isRGB(d)?"#"===d.substr(0,1)?d:"#"+d:void 0},isNumber:function(d){return"string"===typeof d?!isNaN(parseInt(d,10))&&isFinite(d):!1},equalsIgnoreCase:function(d,a){return"string"===typeof d&&"string"===typeof a?d.toLowerCase()===a.toLowerCase():!1},equalsIgnoreCaseTrim:function(a,b){return"string"===typeof a&&"string"===typeof b?a.trim().toLowerCase()===b.trim().toLowerCase():
!1},startsWith:function(a,b){if("string"===typeof a){if("string"===typeof b&&a.length>=b.length)return 0===a.indexOf(b);if($.isArray(b))for(var c in b)if(b.hasOwnProperty(c)){var f=b[c];if("string"===typeof f&&this.startsWith(a,f))return!0}}return!1},endsWith:function(a,b){if("string"===typeof a){if("string"===typeof b&&a.length>=b.length)return a.lastIndexOf(b)===a.length-b.length;if($.isArray(b))for(var c in b)if(b.hasOwnProperty(c)){var f=b[c];if("string"===typeof f&&this.endsWith(a,f))return!0}}return!1},
startsWithIgnoreCase:function(a,b){if("string"===typeof a){if("string"===typeof b&&a.length>=b.length)return this.startsWith(a.toLowerCase(),b.toLowerCase());if($.isArray(b))for(var c in b)if(b.hasOwnProperty(c)){var f=b[c];if("string"===typeof f&&this.startsWithIgnoreCase(a,f))return!0}}return!1},endsWithIgnoreCase:function(a,b){if("string"===typeof a){if("string"===typeof b&&a.length>=b.length)return this.endsWith(a.toLowerCase(),b.toLowerCase());if($.isArray(b))for(var c in b)if(b.hasOwnProperty(c)){var f=
b[c];if("string"===typeof f&&this.endsWithIgnoreCase(a,f))return!0}}return!1},getBaseURL:function(a){return-1<a.indexOf("#")?a.substr(0,a.indexOf("#")):-1<a.indexOf("?")?a.substr(0,a.indexOf("?")):a},getRandomString:function(a){var b,c=[];for(b=0;b<a;b++)c.push("abcdefghijklmnopqrstuvwxyz0123456789_".substr(Math.floor(37*Math.random()),1));return c.join("")},logColors:{userCommands:"66FFFF",modCommands:"FF0000",infoMessage1:"FFFF00",infoMessage2:"66FFFF"},objectSelector:function(a,b,c){b=b.split(".");
for(var f in b)if(b.hasOwnProperty(f)){if(null==a[b[f]])return c;a=a[b[f]]}return a},statusREST:function(a){var b;$.ajax({url:"https://plug.dj/_/rooms",type:"HEAD",cache:!1,crossDomain:!0,timeout:1E4,beforeSend:function(){b=Date.now()},complete:function(c){a(c.status,c.statusText,Date.now()-b)}})},statusSocket:function(a){function b(){e=new WebSocket("wss://godj.plug.dj:443/socket");e.onopen=function(){e.close()};e.onclose=function(e){1E3!==e.code?(3>c&&setTimeout(b,500),3===c&&a(e.code,e.reason,
Date.now()-f),c++):a(e.code,e.reason,Date.now()-f)}}var c=0,f=Date.now(),e;b()}}))});
define("d2154c/eda6bf",["jquery","d2154c/e46bab","d2154c/e2f884"],function(b,e,a){function h(){var a="",e;for(e in k)k.hasOwnProperty(e)&&(a+='@import url("'+k[e]+'");\n');for(e in f)f.hasOwnProperty(e)&&(a+=f[e]+"\n");g.text(a);c&&c._window&&b(c._window.document).find("#plugCubedStyles").text(a)}var c,g,f={},k=[];a.runLite||(c=require("c84be/c1f5e/a3af9/cbc3b/fa74e"));return new (e.extend({init:function(){g=b('<style type="text/css">');b("body").prepend(g)},getList:function(){for(var a in f)f.hasOwnProperty(a)&&
console.log(a,f[a])},get:function(a){return f[a]},addImport:function(a){-1<k.indexOf(a)||(k.push(a),h())},clearImports:function(){0!=k.length&&(k=[],h())},set:function(a,b){f[a]=b;h()},has:function(a){return null!=f[a]},unset:function(a){"string"===typeof a&&(a=[a]);var b=!1,c;for(c in a)a.hasOwnProperty(c)&&this.has(a[c])&&(delete f[a[c]],b=!0);b&&h()},destroy:function(){f={};g.remove()}}))});
define("d2154c/c6f256/bb3fd9",["d2154c/e2f884"],function(b){return b.runLite?{_events:{"chat:receive":[],"chat:delete":[]},trigger:function(){},on:function(b){this._events[b]=[]},off:function(){}}:require("c84be/a25d9/b4d70")});
define("d2154c/c6f256/ca0a92",["jquery","d2154c/f74646","d2154c/e2f884","d2154c/c6f256/bb3fd9"],function(b,e,a,h){if(a.runLite)return null;var c=require("c84be/c1f5e/a3af9/d1de1/a5fb9"),g;return c.extend({initialize:function(a){g=a;this._super()},render:function(){this._super();this.$(".button").mouseover(function(){"undefined"!==typeof plugCubed&&(g.get("mutedOnce")?h.trigger("tooltip:show",e.i18n("tooltip.mutedOnce"),b(this),!0):g.get("muted")&&h.trigger("tooltip:show",e.i18n("tooltip.muted"),b(this),
!0))}).mouseout(function(){"undefined"!==typeof plugCubed&&h.trigger("tooltip:hide")});this.onChange();return this},remove:function(){this._super();var a=new c;b("#now-playing-bar").append(a.$el);a.render()},onClick:function(){"undefined"!==typeof plugCubed&&(h.trigger("tooltip:hide"),g.get("muted")?h.trigger("tooltip:show",e.i18n("tooltip.mutedOnce"),this.$(".button"),!0):g.get("mutedOnce")?h.trigger("tooltip:hide"):h.trigger("tooltip:show",e.i18n("tooltip.muted"),this.$(".button"),!0));g.get("mutedOnce")?
g.set("volume",g.get("lastVolume")):g.get("muted")?(g.onVolumeChange(),this.onChange()):0<g.get("volume")&&g.set({lastVolume:g.get("volume"),volume:0})},onChange:function(){var a=g.get("volume");this.$span.text(a+"%");this.$circle.css("left",parseInt(this.$hit.css("left"))+a/100*this.max-this.$circle.width()/2);60<a&&!this.$icon.hasClass("icon-volume-on")?this.$icon.removeClass().addClass("icon icon-volume-on"):0<a&&!this.$icon.hasClass("icon-volume-half")?this.$icon.removeClass().addClass("icon icon-volume-half"):
0===a&&(g.get("mutedOnce")?this.$icon.hasClass("icon-volume-off-once")||this.$icon.removeClass().addClass("icon icon-volume-off-once"):this.$icon.hasClass("icon-volume-off")||this.$icon.removeClass().addClass("icon icon-volume-off"))}})});
define("d2154c/c6f256/ac60c3",["d2154c/e46bab","d2154c/e2f884","d2154c/f74646","d2154c/c6f256/ca0a92"],function(b,e,a,h){var c;if(e.runLite)b=b.extend({init:function(){API.on(API.ADVANCE,this.djAdvance,this);this.set("lastVolume",this.get("volume"))},close:function(){API.off(API.ADVANCE,this.djAdvance,this)},djAdvance:function(){this.get("mutedOnce")&&this.unmute()},get:function(a){switch(a){case "volume":return API.getVolume();case "muted":return 0===this.get("volume")}return this[a]},set:function(a,
b){switch(a){case "volume":API.setVolume(b);return;case "muted":this.set("volume",b?0:this.get("lastVolume"));return}this[a]=b},mute:function(){this.set("lastVolume",API.getVolume());API.setVolume(0)},muteOnce:function(){this.set("mutedOnce",!0);this.set("lastVolume",API.getVolume());API.setVolume(0)},unmute:function(){API.setVolume(this.get("lastVolume"))}});else{var g=function(){!0===f.get("mutedOnce")&&f.set("volume",f.get("lastVolume"))},f=require("c84be/e76ad/c9bc4"),k;b=b.extend({init:function(){c=
this;f.off("change:volume",f.onVolumeChange);f.onVolumeChange=function(){"undefined"===typeof plugCubed?this.set("muted",0==this.get("volume")):(null==this.get("mutedOnce")&&this.set("mutedOnce",!1),0===this.get("volume")?this.get("muted")?this.get("mutedOnce")?(this.set("mutedOnce",!1),this.set("muted",!1)):this.set("mutedOnce",!0):this.set("muted",!0):(this.set("mutedOnce",!1),this.set("muted",!1)))};f.on("change:volume",f.onVolumeChange);f.on("change:media",g);f._events["change:media"].unshift(f._events["change:media"].pop());
setTimeout(function(){$("#volume").remove();k=new h(c);$("#now-playing-bar").append(k.$el);k.render()},1)},onVolumeChange:function(){f.onVolumeChange()},get:function(a){return f.get(a)},set:function(a,b){f.set(a,b)},mute:function(){for(;!f.get("muted")||f.get("mutedOnce");)k.onClick()},muteOnce:function(){for(;!f.get("mutedOnce");)k.onClick()},unmute:function(){for(;f.get("muted");)k.onClick()},close:function(){}})}return new b});
define("d2154c/bd484b",["d2154c/e46bab","d2154c/e2f884","d2154c/f74646","d2154c/eda6bf","d2154c/c6f256/ac60c3"],function(b,e,a,h,c){function g(a){switch(a.version){case void 0:case 1:null!=a.inlineimages&&(a.chatImages=a.inlineimages);null==a.moderation&&(a.moderation={});null!=a.afkTimers&&(a.moderation.afkTimers=a.afkTimers);break;case 2:null!=a.colors&&(a.colors={}),null!=a.colors.curate&&(a.colors.grab=a.colors.curate)}console.log("[plugÂ³] Updated save",a.version,"=>",k);a.version=k;return a}
var f=[],k;f.push("version");f.push("autowoot","autojoin","autorespond","awaymsg","notify","customColors","moderation","notifySongLength","useRoomSettings","chatImages","twitchEmotes","songTitle");f.push("registeredSongs","alertson","colors");k=3;return new (b.extend({recent:!1,awaymsg:"",autowoot:!1,autojoin:!1,autorespond:!1,notify:0,customColors:!1,chatImages:!0,twitchEmotes:!0,songTitle:!1,registeredSongs:[],alertson:[],etaTimer:!0,moderation:{afkTimers:!1,showDeletedMessages:!1},notifySongLength:10,
useRoomSettings:{},colorInfo:{ranks:{you:{title:"ranks.you",color:"FFDD6F"},regular:{title:"ranks.regular",color:"B0B0B0"},residentdj:{title:"ranks.residentdj",color:"AC76FF"},bouncer:{title:"ranks.bouncer",color:"AC76FF"},manager:{title:"ranks.manager",color:"AC76FF"},cohost:{title:"ranks.cohost",color:"AC76FF"},host:{title:"ranks.host",color:"AC76FF"},ambassador:{title:"ranks.ambassador",color:"89BE6C"},admin:{title:"ranks.admin",color:"42A5DC"}},notifications:{join:{title:"notify.join",color:"3366FF"},
leave:{title:"notify.leave",color:"3366FF"},grab:{title:"notify.grab",color:"00FF00"},meh:{title:"notify.meh",color:"FF0000"},stats:{title:"notify.stats",color:"66FFFF"},updates:{title:"notify.updates",color:"FFFF00"},songLength:{title:"notify.notification.songLength",color:"66FFFF"}}},colors:{you:"FFDD6F",regular:"B0B0B0",residentdj:"AC76FF",bouncer:"AC76FF",manager:"AC76FF",cohost:"AC76FF",host:"AC76FF",ambassador:"89BE6C",admin:"42A5DC",join:"3366FF",leave:"3366FF",grab:"00FF00",stats:"66FFFF",
updates:"FFFF00",songLength:"66FFFF"},load:function(){try{var b=JSON.parse(localStorage.getItem("plugCubed"))||{};if(null==b.version||b.version!==k)b=g(b),this.save();for(var p in f)if(f.hasOwnProperty(p)&&null!=b[f[p]]&&typeof this[f[p]]==typeof b[f[p]])if($.isPlainObject(this[f[p]]))for(var n in this[f[p]])this[f[p]].hasOwnProperty(n)&&null!=b[f[p]][n]&&(this[f[p]][n]=b[f[p]][n]);else this[f[p]]=b[f[p]];this.autowoot&&function(){var a=API.getDJ();null!=a&&a.id!==API.getUser().id&&$("#woot").click()}();
this.autojoin&&function(){var a=API.getDJ();null==a||a.id===API.getUser().id||-1<API.getWaitListPosition()||$("#dj-button").click()}();this.twitchEmotes&&require("d2154c/c41231/dbd025").loadTwitchEmotes();0<this.registeredSongs.length&&null!=API.getMedia()&&-1<this.registeredSongs.indexOf(API.getMedia().id)&&(e.runLite||c.muteOnce(),API.chatLog(a.i18n("automuted",API.getMedia().title)));this.etaTimer&&h.set("etaTimer","#your-next-media .song { top: 8px!important; }")}catch(t){console.error("[plugÂ³] Error loading settings",
t),e.chatLog("system","Error loading settings")}},save:function(){var a={},b;for(b in f)f.hasOwnProperty(b)&&(a[f[b]]=this[f[b]]);a.version=k;localStorage.setItem("plugCubed",JSON.stringify(a))}}))});define("d2154c/a8971a/d85c03",[],function(){return{USER_JOIN:1,USER_LEAVE:2,USER_GRAB:4,SONG_STATS:8,SONG_UPDATE:16,SONG_HISTORY:32,SONG_LENGTH:64,USER_MEH:128}});
define("d2154c/eb7ff4/d10039",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884","d2154c/f74646","d2154c/a8971a/d85c03"],function(b,e,a,h,c){var g=[];return new (b.extend({trigger:{advance:"onDjAdvance",modSkip:"onSkip",userSkip:"onSkip",voteSkip:"onSkip"},register:function(){this.getHistory();this._super()},isInHistory:function(a){var b={pos:-1,inHistory:!1,skipped:!1,length:g.length},c;for(c in g)if(g.hasOwnProperty(c)){var e=g[c];if(e.cid==a&&~~c+1<g.length&&(b.pos=~~c+2,b.inHistory=!0,!e.wasSkipped))return b}b.skipped=
-1<b.pos;return b},onHistoryCheck:function(b){if((API.hasPermission(void 0,API.ROLE.BOUNCER)||a.isPlugCubedDeveloper())&&(e.notify&c.SONG_HISTORY)===c.SONG_HISTORY){var g=this.isInHistory(b);g.inHistory&&(g.skipped?a.chatLog("system",h.i18n("notify.message.historySkipped",g.pos,g.length),void 0,-1):(a.playMentionSound(),setTimeout(a.playMentionSound,50),a.chatLog("system",h.i18n("notify.message.history",g.pos,g.length)+"<br><span onclick=\"if (API.getMedia().cid === '"+b+'\') API.moderateForceSkip()" style="cursor:pointer;">Click here to skip</span>',
void 0,-1)))}},onDjAdvance:function(a){null!=a.media&&(this.onHistoryCheck(a.media.cid),50<g.unshift({id:a.media.cid,author:a.media.author,title:a.media.title,wasSkipped:!1,user:{id:a.dj.id,username:a.dj.username}})&&g.splice(50,g.length-50))},onSkip:function(){g[1].wasSkipped=!0},getHistory:function(){g=[];var a=API.getHistory(),b;for(b in a)if(a.hasOwnProperty(b)){var c=a[b];g.push({cid:c.media.cid,author:c.media.author,title:c.media.title,wasSkipped:!1,dj:{id:c.user.id.toString(),username:c.user.username}})}}}))});
define("d2154c/eb7ff4/f6d5c3",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884","d2154c/f74646","d2154c/a8971a/d85c03"],function(b,e,a,h,c){return new (b.extend({trigger:API.ADVANCE,handler:function(b){(e.notify&c.SONG_LENGTH)===c.SONG_LENGTH&&b.media.duration>60*e.notifySongLength&&(a.playMentionSound(),setTimeout(a.playMentionSound,50),a.chatLog("system",h.i18n("notify.message.songLength",e.notifySongLength)+"<br><span onclick=\"if (API.getMedia().id === '"+b.id+'\') API.moderateForceSkip()" style="cursor:pointer;">Click here to skip</span>',
e.colors.songLength||e.colorInfo.notifications.songLength.color,-1))}}))});define("d2154c/eb7ff4/a17f72",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884","d2154c/f74646","d2154c/a8971a/d85c03"],function(b,e,a,h,c){return new (b.extend({trigger:API.ADVANCE,handler:function(b){(e.notify&c.SONG_STATS)===c.SONG_STATS&&a.chatLog(void 0,h.i18n("notify.message.stats",b.lastPlay.score.positive,b.lastPlay.score.negative,b.lastPlay.score.grabs),e.colors.stats||e.colorInfo.notifications.stats.color,-1)}}))});
define("d2154c/eb7ff4/a78365",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884","d2154c/f74646","d2154c/a8971a/d85c03"],function(b,e,a,h,c){return new (b.extend({trigger:API.ADVANCE,handler:function(b){(e.notify&c.SONG_UPDATE)===c.SONG_UPDATE&&a.chatLog(void 0,h.i18n("notify.message.updates",a.cleanTypedString(b.media.title),a.cleanTypedString(b.media.author),a.cleanTypedString(b.dj.username)),e.colors.updates||e.colorInfo.notifications.updates.color,-1)}}))});
define("d2154c/eb7ff4/ac752c",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884","d2154c/f74646","d2154c/a8971a/d85c03"],function(b,e,a,h,c){return new (b.extend({trigger:API.GRAB_UPDATE,handler:function(b){var f=API.getMedia();(e.notify&c.USER_GRAB)===c.USER_GRAB&&a.chatLog(void 0,h.i18n("notify.message.grab",f.author,f.title),e.colors.grab||e.colorInfo.notifications.grab.color,b.user.id)}}))});
define("d2154c/eb7ff4/bc2f5a",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884","d2154c/f74646","d2154c/a8971a/d85c03"],function(b,e,a,h,c){var g={};return new (b.extend({trigger:API.USER_JOIN,handler:function(b){(e.notify&c.USER_JOIN)===c.USER_JOIN&&(null==g[b.id]||g[b.id]<Date.now()-5E3)&&a.chatLog(void 0,h.i18n("notify.message.join"),e.colors.join||e.colorInfo.notifications.join.color,b.id,b.username);g[b.id]=Date.now();0===a.getUserData(b.id,"joinTime",0)&&a.setUserData(b.id,"joinTime",
Date.now())}}))});
define("d2154c/eb7ff4/ac7be3",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884","d2154c/f74646","d2154c/a8971a/d85c03"],function(b,e,a,h,c){var g={};return new (b.extend({trigger:API.USER_LEAVE,handler:function(b){var k=a.getUserData(b.id,"disconnects",{count:0});(e.notify&c.USER_LEAVE)===c.USER_LEAVE&&(null==k.time||1E3>Date.now()-k.time)&&(null==g[b.id]||g[b.id]<Date.now()-5E3)&&a.chatLog(void 0,h.i18n("notify.message.leave"),e.colors.leave||e.colorInfo.notifications.leave.color,b.id,b.username);
g[b.id]=Date.now()}}))});define("d2154c/eb7ff4/bde359",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884","d2154c/f74646","d2154c/a8971a/d85c03"],function(b,e,a,h,c){return new (b.extend({trigger:API.VOTE_UPDATE,handler:function(b){0>b.vote&&(e.notify&c.USER_MEH)===c.USER_MEH&&a.chatLog(void 0,h.i18n("notify.message.meh"),e.colors.meh||e.colorInfo.notifications.meh.color,b.user.id)}}))});
define("d2154c/d85c03","d2154c/e46bab d2154c/eb7ff4/d10039 d2154c/eb7ff4/f6d5c3 d2154c/eb7ff4/a17f72 d2154c/eb7ff4/a78365 d2154c/eb7ff4/ac752c d2154c/eb7ff4/bc2f5a d2154c/eb7ff4/ac7be3 d2154c/eb7ff4/bde359".split(" "),function(){var b;b=$.makeArray(arguments);return new (b.shift().extend({register:function(){this.unregister();for(var e in b)b.hasOwnProperty(e)&&!b[e].registered&&b[e].register()},unregister:function(){for(var e in b)b.hasOwnProperty(e)&&b[e].registered&&b[e].close()}}))});
define("d2154c/c13da7",[],function(){return{major:4,minor:0,patch:3,prerelease:"",build:23,minified:!1,toString:function(){return this.major+"."+this.minor+"."+this.patch+(null!=this.prerelease&&""!==this.prerelease?"-"+this.prerelease:"")+(this.minified?"_min":"")+" (Build "+this.build+")"}}});
define("d2154c/e4e56f",["underscore","d2154c/e46bab","d2154c/e2f884","d2154c/f74646","d2154c/c13da7"],function(b,e,a,h,c){var g,f=0,k;b=e.extend({connect:function(){},reconnect:function(){this.connect()},disconnect:function(){},onOpen:function(){f=0;console.log("[plugÂ³] Socket Server",k?"Reconnected":"Connected");var b=API.getUser();this.send(JSON.stringify({type:"user:validate",id:b.id,username:b.username,room:a.getRoomID(),version:c.toString()}));$(".plugcubed-status").text(h.i18n("footer.socket",
h.i18n("footer.online")))},onMessage:function(b){var c=JSON.parse(b.data);b=c.data;switch(c.type){case "user:validate":1===b.status&&console.log("[plugÂ³] Socket Server","User validated");break;case "chat:private":if(a.runLite||!b.chatID||0<$(".chat-id-"+b.chatID).length)break;b.fromID!==API.getUser().id&&a.playMentionSound();g.receive(b);API.trigger(API.CHAT,b);break;case "chat:private:notfound":b=API.getUser(b.id)?API.getUser(b.id):{username:"Receiver"};API.chatLog("[plugÂ³ Socket] "+b.username+" not found",
!0);break;case "room:rave":if(a.runLite)break;if(a.isPlugCubedDeveloper(b.id)||a.isPlugCubedSponsor(b.id)||a.hasPermission(b.id,API.ROLE.COHOST))if(c=require("c84be/c1f5e/a3af9/ab1d8"),clearTimeout(c.strobeTimeoutID),0===b.value)c.onFXChange(null,!1);else 1===b.value?(c.onFXChange(null,"strobe"),a.chatLog(void 0,h.i18n("commands.responses.strobe",API.getUser(b.id).username))):2===b.value&&(c.onFXChange(null,"dim"),a.chatLog(void 0,h.i18n("commands.responses.lightsOut",API.getUser(b.id).username)));
break;case "broadcast:message":(a.isPlugCubedDeveloper(b.id)||a.isPlugCubedSponsor(b.id))&&a.chatLog("system","<strong>"+(b.global?"Global":"Room")+" Broadcast from a "+h.i18n("info.specialTitles."+(a.isPlugCubedDeveloper(b.id)?"developer":"sponsor"))+'</strong><br><span style="color:#FFFFFF;font-weight:400">'+b.message+"</span>")}},onClose:function(a){console.log("[plugÂ³] Socket Server","Closed",a);$(".plugcubed-status").text(h.i18n("footer.socket",h.i18n("footer.offline")));k=!0;switch(a.code){case 3001:a=
60;break;case 3002:a=300;break;case 3003:return;case 3006:return;default:if(f++,2>f)a=5;else if(4>f)a=30;else if(8>f)a=60;else return}setTimeout(function(){(void 0).connect()},1E3*a+Math.ceil(5E3*Math.random()))},getState:function(){return(void 0).readyState},send:function(a){"string"===typeof a&&(void 0).send(a)}});a.runLite||(g=require("c84be/e6d1b/e6d87"));return new b});
define("d2154c/a7dd4b","jquery d2154c/e46bab d2154c/e2f884 d2154c/f74646 d2154c/eda6bf d2154c/bd484b d2154c/c6f256/bb3fd9 lang/Lang".split(" "),function(b,e,a,h,c,g,f,k){function m(a,b){if(a&&b){for(var c=a.split("."),d=c.pop(),e=c.length,f=k,g=0;g<e;g++){var h=c[g];if(null!=f[h])f=f[h];else return}null!=f[d]&&(f[d]=b)}}function p(a){-1<a.indexOf("@p3=")&&(a=a.substr(a.indexOf("@p3=")+4),-1<a.indexOf("\n")&&(a=a.substr(0,a.indexOf("\n"))),b.getJSON(a+"?_"+Date.now(),function(a){d=a;t=!0;u.execute()}).fail(function(){API.chatLog("Error loading Room Settings",
!0)}),u.haveRoomSettings=!0)}var n,t,l,q,r,u,d;t=!1;l=b.extend(!0,{},k);q=b.map(l,function(a,c){return"string"===typeof a?c:b.map(a,function(a,b){return c+"."+b})});r="admin ambassador bouncer cohost residentdj leader host manager volunteer".split(" ");a.runLite||(n=require("c84be/e76ad/c5137"));return new (e.extend({rules:{allowAutowoot:!0,allowAutorespond:!0,allowAutojoin:!0},haveRoomSettings:!1,chatColors:{},chatIcons:{},init:function(){u=this;a.runLite||(f.on("room:joining",this.clear,this),f.on("room:joined",
this.update,this))},update:function(){a.runLite?b.getJSON("/_/rooms/state",function(a){"ok"==a.status?p(a.data[0].meta.description):API.chatLog("Error loading Room Description",!0)}):p(a.cleanHTML(n.get("description")))},execute:function(){var e,f;f=null!=g.useRoomSettings[document.location.pathname.split("/")[1]]?g.useRoomSettings[document.location.pathname.split("/")[1]]:!0;this.clear();if(null!=d){if(f){if(null!=d.colors){null!=d.colors.background&&"string"===typeof d.colors.background&&a.isRGB(d.colors.background)&&
c.set("room-settings-background-color","body { background-color: "+a.toRGB(d.colors.background)+"!important; }");if(null!=d.colors.chat){f={};for(e in d.colors.chat)d.colors.chat.hasOwnProperty(e)&&-1<r.indexOf(e)&&"string"===typeof d.colors.chat[e]&&a.isRGB(d.colors.chat[e])&&(f[e]=a.toRGB(d.colors.chat[e]));this.chatColors=f}null!=d.colors.header&&"string"===typeof d.colors.header&&a.isRGB(d.colors.header)&&c.set("room-settings-header","#header { background-color: "+a.toRGB(d.colors.header)+"!important; }");
null!=d.colors.footer&&"string"===typeof d.colors.footer&&a.isRGB(d.colors.footer)&&c.set("room-settings-footer",".app-header { background-color: "+a.toRGB(d.colors.footer)+"!important; }")}if(null!=d.css){if(null!=d.css.font&&b.isArray(d.css.font)){f=[];for(e in d.css.font)if(d.css.font.hasOwnProperty(e)){var p=d.css.font[e];null!=p.name&&null!=p.url&&(p.toString=function(){var a=[];if("string"===typeof this.url)a.push('url("'+this.url+'")');else for(var b in this.url)this.url.hasOwnProperty(b)&&
-1<"woff woff2 opentype svg svgz embedded-opentype truetype".split(" ").indexOf(b)&&a.push('url("'+this.url[b]+'") format("'+b+'")');return'@font-face { font-family: "'+this.name+'"; src: '+a.join(",")+"; }"},f.push(p.toString()))}c.set("room-settings-fonts",f.join("\n"))}if(null!=d.css.import&&b.isArray(d.css.import))for(e in d.css.import)d.css.import.hasOwnProperty(e)&&"string"===typeof d.css.import[e]&&c.addImport(d.css.import[e]);if(null!=d.css.rule){f=[];for(e in d.css.rule)if(d.css.rule.hasOwnProperty(e)){var p=
[],l;for(l in d.css.rule[e])d.css.rule[e].hasOwnProperty(l)&&p.push(l+":"+d.css.rule[e][l]);f.push(e+" {"+p.join(";")+"}")}c.set("room-settings-rules",f.join("\n"))}}if(null!=d.images){d.images.background&&c.set("room-settings-background-image",'.room-background { background-image: url("'+a.proxifyImage(d.images.background)+'")!important; }');if(!a.runLite){var n=b("#playback").find(".background img");null==n.data("_o")&&n.data("_o",n.attr("src"));var q=require("c84be/c1f5e/a3af9/ddd82");d.images.playback&&
"string"===typeof d.images.playback&&0===d.images.playback.indexOf("http")?(l=new Image,l.onload=function(){n.attr("src",this.src);q.frameHeight=this.height-10;q.frameWidth=this.width-18;q.onVideoResize(require("c84be/f590f/e7418").getSize())},l.src=a.proxifyImage(d.images.playback)):(n.attr("src",n.data("_o")),q.frameHeight=n.height()-10,q.frameWidth=n.width()-18,q.onVideoResize(require("c84be/f590f/e7418").getSize()))}null!=d.images.booth&&"string"===typeof d.images.booth&&b("#dj-booth").append(b('<div id="p3-dj-booth">').css("background-image",
'url("'+a.proxifyImage(d.images.booth)+'")'));if(null!=d.images.icons){f={};for(e in d.images.icons)d.images.icons.hasOwnProperty(e)&&-1<r.indexOf(e)&&"string"===typeof d.images.icons[e]&&(f[e]=a.proxifyImage(d.images.icons[e]));this.chatIcons=f}}if(null!=d.text&&null!=d.text.plugDJ)for(e in d.text.plugDJ)d.text.plugDJ.hasOwnProperty(e)&&(l=d.text.plugDJ[e],e&&l&&"string"==typeof l&&m(e,d.text.plugDJ[e]))}null!=d.rules?(this.rules.allowAutowoot=null==d.rules.allowAutowoot||"true"===d.rules.allowAutowoot||
!0===d.rules.allowAutowoot,this.rules.allowAutojoin=null==d.rules.allowAutojoin||"true"===d.rules.allowAutojoin||!0===d.rules.allowAutojoin,this.rules.allowAutorespond=null==d.rules.allowAutorespond||"true"===d.rules.allowAutorespond||!0===d.rules.allowAutorespond):(this.rules.allowAutowoot=!0,this.rules.allowAutojoin=!0,this.rules.allowAutorespond=!0);g.autorespond&&(this.rules.allowAutorespond?b("#chat-input-field").attr("disabled","disabled").attr("placeholder",h.i18n("autorespond.disable")):b("#chat-input-field").removeAttr("disabled").attr("placeholder",
k.chat.placeholder));t&&(a.chatLog(void 0,("string"===typeof d.author?h.i18n("roomSpecificSettings.infoHeaderCredits",a.cleanHTML(d.author,"*")):h.i18n("roomSpecificSettings.infoHeader"))+"<br>"+h.i18n("roomSpecificSettings.infoDisable"),a.logColors.infoMessage2,-1),t=!1);require("d2154c/dc0fcf").update();require("d2154c/e00995/eaae4d").createMenu()}},clear:function(){this.chatColors={};this.chatIcons={};for(var d in q)if(q.hasOwnProperty(d)){var e=q[d],f=e;a:{if(e)for(var e=e.split("."),g=e.pop(),
h=e.length,k=l,p=0;p<h;p++){var n=e[p];if(null!=k[n])k=k[n];else break;if(null!=k[g]){e=k[g];break a}}e=""}m(f,e)}b("#p3-dj-booth").remove();c.unset("room-settings-background-color room-settings-background-image room-settings-booth room-settings-fonts room-settings-rules room-settings-maingui".split(" "));c.clearImports();a.runLite||(d=b("#playback").find(".background img"),null==d.data("_o")&&d.data("_o",d.attr("src")),d.attr("src",d.data("_o")),f=require("c84be/c1f5e/a3af9/ddd82"),f.frameHeight=
d.height()-10,f.frameWidth=d.width()-18,f.onVideoResize(require("c84be/f590f/e7418").getSize()))},close:function(){a.runLite||(f.off("room:joining",this.clear,this),f.off("room:joined",this.update,this));this.clear()}}))});
define("d2154c/f9f690",["jquery","d2154c/e46bab"],function(b,e){return e.extend({init:function(a,e,c,g){this.min=a?a:0;this.max=e?e:100;this.value=c?c:this.min;this.cb=g;this.startBind=b.proxy(this.onStart,this);this.moveBind=b.proxy(this.onUpdate,this);this.stopBind=b.proxy(this.onStop,this);this.clickBind=b.proxy(this.onClick,this);this.$slider=b('<div class="p3slider"><div class="line"></div><div class="circle"></div><div class="hit"></div></div>');this.$line=this.$slider.find(".line");this.$hit=
this.$slider.find(".hit");this.$circle=this.$slider.find(".circle");this.$hit.mousedown(this.startBind);this._max=this.$hit.width()-this.$circle.width();this.onChange();return this},onStart:function(a){this._min=this.$hit.offset().left;this._max=this.$hit.width()-this.$circle.width();b(document).on("mouseup",this.stopBind).on("mousemove",this.moveBind);return this.onUpdate(a)},onUpdate:function(a){this.value=Math.max(this.min,Math.min(this.max,~~((a.pageX-this._min)/this._max*(this.max-this.min))+
this.min));this.onChange();a.preventDefault();a.stopPropagation();return!1},onStop:function(a){b(document).off("mouseup",this.stopBind).off("mousemove",this.moveBind);a.preventDefault();a.stopPropagation();return!1},onChange:function(){this.$circle.css("left",parseInt(this.$hit.css("left"))+this.$line.width()*((this.value-this.min)/(this.max-this.min))-this.$circle.width()/2);"function"===typeof this.cb&&this.cb(this.value)}})});
define("d2154c/dc0fcf","jquery d2154c/e46bab d2154c/a7dd4b d2154c/eda6bf d2154c/bd484b d2154c/e2f884".split(" "),function(b,e,a,h,c,g){return new (e.extend({update:function(){var b=c.useRoomSettings[document.location.pathname.split("/")[1]],b=!(null!=b&&!0!==b);h.unset("CCC-text-admin CCC-text-ambassador CCC-text-host CCC-text-cohost CCC-text-manager CCC-text-bouncer CCC-text-residentdj CCC-text-regular CCC-text-you CCC-image-admin CCC-image-ambassador CCC-image-host CCC-image-cohost CCC-image-manager CCC-image-bouncer CCC-image-residentdj".split(" "));
(b&&a.chatColors.admin||c.colors.admin!==c.colorInfo.ranks.admin.color)&&h.set("CCC-text-admin",["#user-panel:not(.is-none) .user > .icon-chat-admin + .name","#user-lists .user > .icon-chat-admin + .name",".from-admin .un { color:"+g.toRGB(c.colors.admin!==c.colorInfo.ranks.admin.color?c.colors.admin:a.chatColors.admin)+"!important; }"].join(",\n"));(b&&a.chatColors.ambassador||c.colors.ambassador!==c.colorInfo.ranks.ambassador.color)&&h.set("CCC-text-ambassador",["#user-panel:not(.is-none) .user > .icon-chat-ambassador + .name",
"#user-lists .user > .icon-chat-ambassador + .name",".from-ambassador .un { color:"+g.toRGB(c.colors.ambassador!==c.colorInfo.ranks.ambassador.color?c.colors.ambassador:a.chatColors.ambassador)+"!important; }"].join(",\n"));(b&&a.chatColors.host||c.colors.host!==c.colorInfo.ranks.host.color)&&h.set("CCC-text-host",["#user-panel:not(.is-none) .user > .icon-chat-host + .name","#user-lists .user > .icon-chat-host + .name",".from-host .un { color:"+g.toRGB(c.colors.host!==c.colorInfo.ranks.host.color?
c.colors.host:a.chatColors.host)+"!important; }"].join(",\n"));(b&&a.chatColors.cohost||c.colors.cohost!==c.colorInfo.ranks.cohost.color)&&h.set("CCC-text-cohost",["#user-panel:not(.is-none) .user > .icon-chat-cohost + .name,\n#user-lists .user > .icon-chat-cohost + .name,\n.from-cohost .un",".cohost .icon-chat-host { color:"+g.toRGB(c.colors.cohost!==c.colorInfo.ranks.cohost.color?c.colors.cohost:a.chatColors.cohost)+"!important; }"].join(",\n"));(b&&a.chatColors.manager||c.colors.manager!==c.colorInfo.ranks.manager.color)&&
h.set("CCC-text-manager",["#user-panel:not(.is-none) .user > .icon-chat-manager + .name","#user-lists .user > .icon-chat-manager + .name",".from-manager .un { color:"+g.toRGB(c.colors.manager!==c.colorInfo.ranks.manager.color?c.colors.manager:a.chatColors.manager)+"!important; }"].join(",\n"));(b&&a.chatColors.bouncer||c.colors.bouncer!==c.colorInfo.ranks.bouncer.color)&&h.set("CCC-text-bouncer",["#user-panel:not(.is-none) .user > .icon-chat-bouncer + .name","#user-lists .user > .icon-chat-bouncer + .name",
".from-bouncer .un { color:"+g.toRGB(c.colors.bouncer!==c.colorInfo.ranks.bouncer.color?c.colors.bouncer:a.chatColors.bouncer)+"!important; }"].join(",\n"));(b&&a.chatColors.residentdj||c.colors.residentdj!==c.colorInfo.ranks.residentdj.color)&&h.set("CCC-text-residentdj",["#user-panel:not(.is-none) .user > .icon-chat-dj + .name","#user-lists .user > .icon-chat-dj + .name",".from-dj .un { color:"+g.toRGB(c.colors.residentdj!==c.colorInfo.ranks.residentdj.color?c.colors.residentdj:a.chatColors.residentdj)+
"!important; }"].join(",\n"));(b&&a.chatColors.regular||c.colors.regular!==c.colorInfo.ranks.regular.color)&&h.set("CCC-text-regular",["#user-panel:not(.is-none) .user > .name:first-child","#user-lists .user > .name:first-child",".un { color:"+g.toRGB(c.colors.regular!==c.colorInfo.ranks.regular.color?c.colors.regular:a.chatColors.regular)+"!important; }"].join(",\n"));c.colors.you!==c.colorInfo.ranks.you.color&&h.set("CCC-text-you",["#user-lists .list .user.is-you .name",".from-you .un { color:"+
g.toRGB(c.colors.you)+"!important; }"].join(",\n"));b&&(a.chatIcons.admin&&h.set("CCC-image-admin",""+('.icon-chat-admin { background-image: url("'+a.chatIcons.admin+'"); background-position: 0 0; }')),a.chatIcons.ambassador&&h.set("CCC-image-ambassador",""+('.icon-chat-ambassador { background-image: url("'+a.chatIcons.ambassador+'"); background-position: 0 0; }')),a.chatIcons.host&&h.set("CCC-image-host",""+('.icon-chat-host { background-image: url("'+a.chatIcons.host+'"); background-position: 0 0; }')),
a.chatIcons.cohost&&h.set("CCC-image-cohost",""+('.icon-chat-cohost, .cohost .icon-chat-host { background-image: url("'+a.chatIcons.cohost+'"); background-position: 0 0; }')),a.chatIcons.manager&&h.set("CCC-image-manager",""+('.icon-chat-manager { background-image: url("'+a.chatIcons.manager+'"); background-position: 0 0; }')),a.chatIcons.bouncer&&h.set("CCC-image-bouncer",""+('.icon-chat-bouncer { background-image: url("'+a.chatIcons.bouncer+'"); background-position: 0 0; }')),a.chatIcons.residentdj&&
h.set("CCC-image-residentdj",""+('.icon-chat-dj { background-image: url("'+a.chatIcons.residentdj+'"); background-position: 0 0; }')))}}))});
define("d2154c/e00995/dc0fcf","jquery d2154c/e46bab d2154c/f74646 d2154c/dc0fcf d2154c/bd484b d2154c/e2f884 d2154c/c6f256/bb3fd9".split(" "),function(b,e,a,h,c,g,f){function k(e,k,m){c.colors[e]||(c.colors[e]=m);return b('<div class="item">').addClass("p3-s-cc-"+e).append(b("<span>").text(k)).append(b("<span>").addClass("default").css("display",c.colors[e]===m?"none":"block").mouseover(function(){f.trigger("tooltip:show",a.i18n("tooltip.reset"),b(this),!1)}).mouseout(function(){f.trigger("tooltip:hide")}).click(function(){b(this).parent().find("input").val(m);
b(this).parent().find(".example").css("background-color",g.toRGB(m));b(this).css("display","none");c.colors[e]=m;c.save();h.update()})).append(b("<span>").addClass("example").css("background-color",g.toRGB(c.colors[e]))).append(b("<input>").val(c.colors[e]).keyup(function(){g.isRGB(b(this).val())&&(b(this).parent().find(".example").css("background-color",g.toRGB(b(this).val())),c.colors[e]=b(this).val(),c.save(),h.update());b(this).parent().find(".default").css("display",b(this).val()===m?"none":
"block")}))}var m;return new (e.extend({render:function(){var e,f=b("#p3-settings");if(null!=m)"-500px"===m.css("left")?m.animate({left:f.width()+1}):m.animate({left:-500});else{var g=b('<div class="container">').append(b('<div class="section">').text("User Ranks"));for(e in c.colorInfo.ranks)c.colorInfo.ranks.hasOwnProperty(e)&&g.append(k(e,a.i18n(c.colorInfo.ranks[e].title),c.colorInfo.ranks[e].color));g.append(b('<div class="spacer">').append(b('<div class="divider">'))).append(b('<div class="section">').text(a.i18n("notify.header")));
for(e in c.colorInfo.notifications)c.colorInfo.notifications.hasOwnProperty(e)&&g.append(k(e,a.i18n(c.colorInfo.notifications[e].title),c.colorInfo.notifications[e].color));m=b('<div id="p3-settings-custom-colors" style="left: -500px;">').append(b('<div class="header">').append(b('<div class="back">').append(b('<i class="icon icon-arrow-left"></i>')).click(function(){null!=m&&m.animate({left:-500})})).append(b('<div class="title">').append(b("<span>").text(a.i18n("menu.customchatcolors"))))).append(g).animate({left:f.width()+
1});b("#p3-settings-wrapper").append(m)}},hide:function(){null!=m&&m.animate({left:-500})}}))});
define("d2154c/e00995/c2bcd9",["jquery","underscore","d2154c/e46bab"],function(b,e,a){var h,c,g,f,k,m,p,n,t,l,q,r={},u,d,w;h=a.extend({getJQueryElement:function(){console.error("Missing getJQueryElement");return null}});g=h.extend({init:function(a,d){var c=this;this.$div=b("<div>").addClass("button").text(a);d&&this.$div.addClass("submit");this.$div.click(function(){c.onClick()});return this},changeLabel:function(a){this.$div.text(a);return this},changeSubmit:function(a){this.$div.removeClass("submit");
a&&this.$div.addClass("submit");return this},onClick:function(){console.error("Missing onClick")},getJQueryElement:function(){return this.$div}});f=h.extend({init:function(a,d,c){this.$div=b("<div>").addClass("input-group");d&&(this.$label=b("<div>").addClass("label").text(d));this.$input=b("<input>").attr({type:a,placeholder:c});d&&this.$div.append(this.$label);this.$div.append(this.$input)},changeLabel:function(a){this.$div.text(a);return this},changeSubmit:function(a){this.$div.removeClass("submit");
a&&this.$div.addClass("submit");return this},change:function(a){"function"==typeof a&&this.$div.change(a);return this},getJQueryElement:function(){return this.$div}});c=a.extend({init:function(a){this._content=[];this.name=a},addContent:function(a){a instanceof b&&this._content.push(a)},print:function(){for(var a in this._content)if(this._content.hasOwnProperty(a)){var b=this._content[a];b instanceof h&&(b=b.getJQueryElement());l.getContentPane().append(b)}}});return new (a.extend({init:function(){u=
this;d=e.bind(this.onResize,this);w=e.bind(this.onTabClick,this);b(window).resize(d);this.shown=!1},close:function(){b(window).off("resize",d);null!=k&&k.remove()},createControlPanel:function(a){if(null!=k)k.remove();else if(a)return;k=b("<div>").attr("id","p3-control-panel");p=b("<div>").attr("id","p3-control-panel-menu");for(var d in r)r.hasOwnProperty(d)&&p.append(b("<div>").addClass("p3-control-panel-menu-tab tab-"+d).data("id",d).text(d).click(w));m=b("<div>").attr("id","p3-control-panel-top").append(b("<span>").text("Control Panel"));
k.append(m).append(p);n=b("<div>").attr("id","p3-control-panel-current");k.append(n);t=b("<div>").attr("id","p3-control-panel-close").append('<i class="icon icon-arrow-down"></i>').click(function(){u.toggleControlPanel(!1)});k.append(t);b("body").append(k);this.onResize()},inputField:function(a,b,d){return new f(a,b,d)},button:function(a,b,d){a=new g(a,b);"function"===typeof d&&(a.onClick=d);return a},onResize:function(){if(null!=k){var a=b("#playlist-panel"),d=b(window).height()-150;k.css({width:a.width(),
height:this.shown?d:0,"z-index":50});n.css({width:a.width()-256-20,height:this.shown?d-m.height()-20:0});this.shown&&l&&l.reinitialise()}},toggleControlPanel:function(a){if(null==k){if(null!=a&&!a)return;this.createControlPanel()}this.shown=null!=a?a:!this.shown;q=b(window).height()-150;k.animate({height:this.shown?q:0},{duration:350,easing:"easeInOutExpo",complete:function(){u.shown||(k.detach(),k=null,l.destroy(),l=null)}})},onTabClick:function(a){this.openTab(b(a.currentTarget).data("id"))},openTab:function(a){this.toggleControlPanel(!0);
var d=r[a];null!=d&&d instanceof c&&(p.find(".current").removeClass("current"),b(".p3-control-panel-menu-tab.tab-"+a).addClass("current"),null==l&&(n.jScrollPane({showArrows:!0}),l=n.data("jsp")),l.getContentPane().html(""),d.print(),this.onResize())},addPanel:function(a){a=a.trim();if(null!=r[a])return null;r[a]=new c(a);this.createControlPanel(!0);return r[a]},removePanel:function(a){if(!(a instanceof c)||null==r[a.name])return!1;delete r[a.name];this.createControlPanel(!0);return!0}}))});
define("d2154c/c41231/dbd025","jquery d2154c/e46bab d2154c/e2f884 d2154c/f74646 d2154c/bd484b d2154c/c6f256/bb3fd9".split(" "),function(b,e,a,h,c,g){function f(d,e){if(c.chatImages&&0>d.toLowerCase().indexOf("nsfw")){var f=b("<div/>");f.html(d).find("a").each(function(){var d=b(this).attr("href"),c=null,f,g;if(!a.startsWithIgnoreCase(d,["http://plug.dj","https://plug.dj"])){if(a.endsWithIgnoreCase(d,[".gif",".jpg",".jpeg",".png"])||a.endsWithIgnoreCase(a.getBaseURL(d),[".gif",".jpg",".jpeg",".png"]))c=
a.proxifyImage(d);else if(a.startsWithIgnoreCase(d,["http://gfycat.com/","https://gfycat.com/"]))d=d.split("/"),3<d.length&&(d=d[3],0!==d.trim().length&&(g="video-"+a.getRandomString(8),f=b('<video autoplay loop muted="muted">').addClass(g).css("display","block").css("max-width","100%").css("height","auto").css("margin","0 auto"),b(this).html("").append(f),f.on("load",function(){var a=q&&q._window?b(q._window.document).find("#chat-messages"):b("#chat-messages"),d=this.height;this.width>a.find(".message").width()&&
(d*=this.width/a.find(".message").width());a.scrollTop(a[0].scrollHeight+d)}),b.getJSON("https://gfycat.com/cajax/get/"+d,function(d){f=e.find("."+g);if(d.error)console.log("error",d),f.html(d.error);else{var c,h;c=a.httpsifyURL(d.gfyItem.webmUrl);h=a.httpsifyURL(d.gfyItem.mp4Url);d=a.httpsifyURL(d.gfyItem.gifUrl);f.append(b("<source>").attr("type","video/webm").attr("src",c));f.append(b("<source>").attr("type","video/mp4").attr("src",h));f.append(b("<img>").attr("src",d))}})));else if(a.startsWithIgnoreCase(d,
["http://prntscr.com/","https://prntscr.com/"]))d=d.split("/"),3<d.length&&(d=d[3],0!==d.trim().length&&(c="https://api.plugCubed.net/redirect/prntscr/"+d));else if(a.startsWithIgnoreCase(d,["http://imgur.com/gallery/","https://imgur.com/gallery/","http://imgur.com/","https://imgur.com/"]))d=d.split("/"),4<d.length&&(d=d[4],0!==d.trim().length&&(g="video-"+a.getRandomString(8),f=b('<video autoplay loop muted="muted">').addClass(g).css("display","block").css("max-width","100%").css("height","auto").css("margin",
"0 auto"),b(this).html("").append(f),f.on("load",function(){var a=q&&q._window?b(q._window.document).find("#chat-messages"):b("#chat-messages"),d=this.height;this.width>a.find(".message").width()&&(d*=this.width/a.find(".message").width());a.scrollTop(a[0].scrollHeight+d)}),b.getJSON("https://api.plugcubed.net/redirect/imgurraw/"+d,function(d){f=e.find("."+g);d.error?(console.log("error",d),f.html(d.error)):(null!=d.webm&&f.append(b("<source>").attr("type","video/webm").attr("src",a.httpsifyURL(d.webm))),
null!=d.webm&&f.append(b("<source>").attr("type","video/mp4").attr("src",a.httpsifyURL(d.mp4))),f.attr("poster",a.httpsifyURL(d.link)),f.append(b("<img>").attr("src",a.httpsifyURL(d.link))))})));else if(a.startsWithIgnoreCase(d,["http://gyazo.com/","https://gyazo.com/"]))d=d.split("/"),3<d.length&&(d=d[3],0!==d.trim().length&&(c="https://i.gyazo.com/"+d+".png"));else{var h=[/http:\/\/[a-z\-\.]+\.deviantart.com\/art\/[0-9a-zA-Z:\-]+/,/http:\/\/[a-z\-\.]+\.deviantart.com\/[0-9a-zA-Z:\-]+#\/[0-9a-zA-Z:\-]+/,
/http:\/\/fav.me\/[0-9a-zA-Z]+/,/http:\/\/sta.sh\/[0-9a-zA-Z]+/],k;for(k in h)if(h.hasOwnProperty(k)&&h[k].test(d)){c="https://api.plugCubed.net/redirect/da/"+d;break}}null!==c&&(c=b("<img>").attr("src",c).css("display","block").css("max-width","100%").css("height","auto").css("margin","0 auto"),b(this).html(c),c.on("load",function(){var a=q&&q._window?b(q._window.document).find("#chat-messages"):b("#chat-messages"),d=this.height;this.width>a.find(".message").width()&&(d*=this.width/a.find(".message").width());
a.scrollTop(a[0].scrollHeight+d)}))}});d=f.html()}return d}function k(d){if(c.twitchEmotes){var e=a.startsWithIgnoreCase(d,"&nbsp;");d=" "+(e?d.replace("&nbsp;",""):d)+" ";for(var f in u)if(u.hasOwnProperty(f)){var g=u[f];if(-1<d.indexOf(" "+g.emote+" ")||-1<d.indexOf(":"+g.emote+":")){var h=b("<div>"),k=b("<img>").addClass("twitch-emote").attr("src",r.split("{image_id}").join(g.image_id)).data("emote",b("<span>").html(g.emote).text());k.on("load",function(){var a=q&&q._window?b(q._window.document).find("#chat-messages"):
b("#chat-messages"),d=this.height;this.width>a.find(".message").width()&&(d*=this.width/a.find(".message").width());a.scrollTop(a[0].scrollHeight+d)});h.append(k);d=d.split(" "+g.emote+" ").join(" "+h.html()+" ");d=d.split(":"+g.emote+":").join(h.html())}}return(e?"&nbsp;":"")+d.substr(1,d.length-2)}return d}function m(b){if(b.uid){if(b.uid==API.getUser().id){var c=a.getUserData(-1,"latestInputs",[]);c.push(b.message);10<c.length&&c.splice(0,1);a.setUserData(-1,"latestInputs",c);a.setUserData(-1,
"tmpInput",null)}a.setUserData(b.uid,"lastChat",Date.now());if(c=a.hasPermission(void 0,API.ROLE.DJ))c=API.getUser().id,c=a.isPlugCubedDeveloper(c)||a.isPlugCubedSponsor(c)||a.isPlugCubedAmbassador(c);c&&(b.deletable=!0);b.un=a.cleanHTML(b.un,"*");b.message=a.cleanHTML(b.message,["div","table","tr","td"])}}function p(d){if(d.uid){var c=b(".msg.cid-"+d.cid).closest(".cm"),e,h="";e=c.find(".text").html();null!=e&&-1<e.indexOf("<br>")&&(h=e.substr(0,e.lastIndexOf("<br>")+4));var m=c.attr("class"),m=
m+(" fromID-"+d.uid);a.havePlugCubedRank(d.uid)&&(m+=" is-p3"+a.getHighestRank(d.uid));m+=" from";a.hasPermission(d.uid,API.ROLE.DJ)&&(m+="-",a.hasPermission(d.uid,API.ROLE.HOST,!0)?m+="admin":a.hasPermission(d.uid,API.ROLE.BOUNCER,!0)?m+="ambassador":a.hasPermission(d.uid,API.ROLE.HOST)?m+="host":a.hasPermission(d.uid,API.ROLE.COHOST)?m+="cohost":a.hasPermission(d.uid,API.ROLE.MANAGER)?m+="manager":a.hasPermission(d.uid,API.ROLE.BOUNCER)?m+="bouncer":a.hasPermission(d.uid,API.ROLE.DJ)&&(m+="dj"));
d.uid==API.getUser().id&&(m+=" from-you");d.message=f(d.message,c);d.message=k(d.message);if(a.havePlugCubedRank(d.uid)||a.hasPermission(d.uid,API.ROLE.DJ)){e=c.find(".from .icon");var l=a.getPlugCubedSpecial(d.uid);0===e.length&&(e=b("<i>").addClass("icon").css({width:"16px",height:"16px"}).prependTo(c.find(".from")));e.mouseover(function(){g.trigger("tooltip:show",b("<span>").html(a.getAllPlugCubedRanks(d.uid)).text(),b(this),!0)}).mouseout(function(){g.trigger("tooltip:hide")});null!=l&&e.css("background-image",
'url("https://d1rfegul30378.cloudfront.net/files/images/icons.p3special.'+l.icon+'.png")')}c.attr("class",m);c.find(".text").html(h+a.cleanHTML(d.message,["div","table","tr","td"],["img","video","source"]));c.data("translated",!1);c.dblclick(function(e){e.ctrlKey&&(c.data("translated")?(c.find(".text").html(k(f(d.message))),c.data("translated",!1)):(c.find(".text").html("<em>Translating...</em>"),b.get("https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22http%3A%2F%2Ftranslate.google.com%2Ftranslate_a%2Ft%3Fclient%3Dp3%26sl%3Dauto%26tl%3D"+
API.getUser().language+"%26ie%3DUTF-8%26oe%3DUTF-8%26q%3D"+encodeURIComponent(encodeURIComponent(d.message.replace("&nbsp;"," ")))+"%22&format=json",function(b){b.error?(c.find(".text").html(k(f(d.message))),c.data("translated",!1)):(c.find(".text").html(k(f(a.objectSelector(b,"query.results.json.sentences.trans",d.message)))),c.data("translated",!0))},"json")),e.stopPropagation())})}}function n(d){if((a.hasPermission(void 0,API.ROLE.BOUNCER)||a.isPlugCubedDeveloper())&&c.moderation.showDeletedMessages){var e=
b(".text.cid-"+d);0<e.length&&e.each(function(){b(this).removeClass("cid-"+d).closest(".cm").removeClass("deletable").css("opacity",.3).off("mouseenter").off("mouseleave")})}}function t(a){38==a.keyCode?l(!0,b(this)):40==a.keyCode&&l(!1,b(this))}function l(b,c){var e=a.getUserData(-1,"latestInputs",[]);if(0!==e.length){var f=a.getUserData(-1,"curInputPos",0),g=a.getUserData(-1,"tmpInput",null);if(null==g&&b||0===f)g=c.val();else if(null==g)return;f=Math.max(0,Math.min(f+(b?1:-1),e.length));a.setUserData(-1,
"curInputPos",f);a.setUserData(-1,"tmpInput",g);c.val(0===f?g:e[e.length-f])}}var q,r="",u=[];a.runLite||(q=require("c84be/c1f5e/a3af9/cbc3b/fa74e"));b("#chat-messages").on("mouseover",".twitch-emote",function(){g.trigger("tooltip:show",b(this).data("emote"),b(this),!0)}).on("mouseout",".twitch-emote",function(){g.trigger("tooltip:hide")});return new (e.extend({loadTwitchEmotes:function(){b.getJSON("https://api.plugcubed.net/twitchemotes",function(a){r=a.template.small;u=[];for(var b in a.emotes)a.emotes.hasOwnProperty(b)&&
u.push({emote:b,image_id:a.emotes[b].image_id});console.log("[plugÂ³]",u.length+" Twitch.TV emoticons loaded!")})},unloadTwitchEmotes:function(){u=[]},register:function(){g.on("chat:receive",m);g._events["chat:receive"].unshift(g._events["chat:receive"].pop());g.on("chat:receive",p);g.on("chat:delete",n);g._events["chat:delete"].unshift(g._events["chat:delete"].pop());b("#chat-input-field").on("keyup",t)},close:function(){g.off("chat:receive",m);g.off("chat:receive",p);g.off("chat:delete",n);b("#chat-input-field").off("keyup",
t)}}))});
define("d2154c/c41231/ce8e83",["jquery","d2154c/e46bab","d2154c/eda6bf","d2154c/f74646"],function(b,e,a,h){function c(){if(g){a.unset("Fullscreen");var c=b(".app-right").height(),e=b("#dj-button").height(),f=b("#vote").height(),h=b(document).width(),t=b("#chat").width();a.set("Fullscreen",".app-right { height: "+(c-f-e)+"px!important; } #chat-messages { height: "+(b("#chat-messages").height()-f-e)+"px!important; } #dj-button { right: 0px!important; top: "+(c-f-7)+"px!important; width: 345px!important; left: initial!important; } #vote { right: 0px!important; top: "+(c-
7)+"px!important; width: 345px!important; left: initial!important; } #vote .crowd-response { width: 33.33%!important; margin-right: 0px!important; }#woot, #woot .bottom, #meh, #meh .bottom, #dj-button, #dj-button .left { border-radius: 0px 0px 0px 0px } #playback-container { height: "+(b(document).height()-b(".app-header").height()-b("#footer").height())+"px!important; width: "+(h-t)+"px!important; left: -9px!important; } #playback-controls { left: "+(h-t-b("#playback-controls").width())/2+"px!important; } #playback { left: 9px!important; z-index: 6; } ")}}
var g=!1,f;return new (e.extend({create:function(){f=b("<div>").addClass("button p3-fullscreen").append(b("<div>").addClass("box").text("Enlarge")).css("background-color","rgba(28,31,37,.7)");b("#playback-controls").append(f).find(".button").width("25%").parent().find(".button .box .icon").hide();f.click(b.proxy(this.onClick,this));b(window).resize(function(){clearTimeout(a);var a=setTimeout(c,100)})},onClick:function(){this.toggleFullScreen()},toggleFullScreen:function(){(g=!g)?(f.find(".box").text(h.i18n("fullscreen.shrink")),
c()):(f.find(".box").text(h.i18n("fullscreen.enlarge")),a.unset("Fullscreen"))},close:function(){f.remove();b("#playback-controls").find(".button").removeAttr("style").parent().find(".button .box .icon").show();b(window).off("resize",c);a.unset("Fullscreen")}}))});
define("d2154c/e00995/eaae4d","jquery d2154c/e46bab d2154c/c13da7 d2154c/a8971a/d85c03 d2154c/bd484b d2154c/e2f884 d2154c/f74646 d2154c/eda6bf d2154c/a7dd4b d2154c/f9f690 d2154c/e00995/dc0fcf d2154c/e00995/c2bcd9 d2154c/c6f256/bb3fd9 d2154c/c41231/dbd025 d2154c/c41231/ce8e83 lang/Lang".split(" "),function(b,e,a,h,c,g,f,k,m,p,n,t,l,q,r,u){function d(a,d,c){return b("<div>").addClass("item p3-s-"+d+(a?" selected":"")).append(b("<i>").addClass("icon icon-check-blue")).append(b("<span>").text(c)).data("key",
d).click(C)}var w,v,z,x,y,A,B,C;y=b('<div id="plugcubed"><div class="cube-wrap"><div class="cube"><i class="icon icon-plugcubed"></i><i class="icon icon-plugcubed other"></i></div></div></div>');A=b("<div>").addClass("chat-header-button p3-s-stream").data("key","stream");B=b("<div>").addClass("chat-header-button p3-s-clear").data("key","clear");g.runLite||(z=require("c84be/cfd90/a6e63"),require("c84be/e76ad/c9bc4"));return new (e.extend({init:function(){x=this;C=b.proxy(this.onClick,this);this.shown=
!1;b("#app-menu").after(y);y.click(function(){x.toggleMenu();t.toggleControlPanel(!1)});b("#room-bar").css("left",108).find(".favorite").css("right",55);b("#plugcubed .cube-wrap .cube").bind("webkitAnimationEnd mozAnimationEnd msAnimationEnd animationEnd",function(){b("#plugcubed .cube-wrap .cube").removeClass("spin")});b("#plugcubed").mouseenter(function(){b("#plugcubed .cube-wrap .cube").addClass("spin")});g.runLite||(b("#chat-header").append(A.click(b.proxy(this.onClick,this)).mouseover(function(){l.trigger("tooltip:show",
f.i18n("tooltip.stream"),b(this),!0)}).mouseout(function(){l.trigger("tooltip:hide")})).append(B.click(b.proxy(this.onClick,this)).mouseover(function(){l.trigger("tooltip:show",f.i18n("tooltip.clear"),b(this),!0)}).mouseout(function(){l.trigger("tooltip:hide")})),this.onRoomJoin(),l.on("room:joined",this.onRoomJoin,this));r.create()},onRoomJoin:function(){this.setEnabled("stream",z.settings.streamDisabled)},close:function(){y.remove();null!=w&&w.remove();b("#room-bar").css("left",54).find(".favorite").css("right",
0);g.runLite||(A.remove(),B.remove(),l.off("room:joined",this.onRoomJoin,this));t.close();r.close()},setEnabled:function(a,d){var c=b(".p3-s-"+a).removeClass("selected");d&&c.addClass("selected")},onClick:function(a){a=b(a.currentTarget).data("key");switch(a){case "woot":c.autowoot=!c.autowoot;this.setEnabled("woot",c.autowoot);c.autowoot&&function(){var a=API.getDJ();null!==a&&a.id!==API.getUser().id&&b("#woot").click()}();break;case "join":c.autojoin=!c.autojoin;this.setEnabled("join",c.autojoin);
c.autojoin&&function(){var a=API.getDJ();null==a||a.id==API.getUser().id||-1<API.getWaitListPosition()||b("#dj-button").click()}();break;case "chatimages":c.chatImages=!c.chatImages;this.setEnabled("chatimages",c.chatImages);break;case "twitchemotes":c.twitchEmotes=!c.twitchEmotes;c.twitchEmotes?q.loadTwitchEmotes():q.unloadTwitchEmotes();this.setEnabled("twitchemotes",c.twitchEmotes);break;case "colors":n.render();break;case "controlpanel":t.toggleControlPanel(!0);this.toggleMenu(!1);break;case "autorespond":c.autorespond=
!c.autorespond;this.setEnabled("autorespond",c.autorespond);c.autorespond?(""===c.awaymsg.trim()&&(c.awaymsg=f.i18n("autorespond.default")),b("#chat-input-field").attr("disabled","disabled").attr("placeholder",f.i18n("autorespond.disable"))):b("#chat-input-field").removeAttr("disabled").attr("placeholder",u.chat.placeholder);break;case "notify-join":case "notify-leave":case "notify-grab":case "notify-meh":case "notify-stats":case "notify-updates":case "notify-history":case "notify-songLength":var d=
b(".p3-s-"+a);if(!d.data("perm")||API.hasPermission(void 0,d.data("perm"))||g.isPlugCubedDeveloper())d=d.data("bit"),c.notify+=(c.notify&d)===d?-d:d,this.setEnabled(a,(c.notify&d)===d);break;case "stream":z.settings.streamDisabled=!z.settings.streamDisabled;l.trigger("change:streamDisabled");this.setEnabled("stream",z.settings.streamDisabled);return;case "clear":l.trigger("ChatFacadeEvent:clear");return;case "roomsettings":a=c.useRoomSettings[window.location.pathname.split("/")[1]];a=!(null==a||!0===
a);c.useRoomSettings[window.location.pathname.split("/")[1]]=a;m.execute(a);this.setEnabled("roomsettings",a);break;case "afktimers":c.moderation.afkTimers=!c.moderation.afkTimers;this.setEnabled("afktimers",c.moderation.afkTimers);c.moderation.afkTimers||b("#waitlist").find(".user .afkTimer").remove();break;case "etatimer":c.etaTimer=!c.etaTimer;this.setEnabled("etatimer",c.etaTimer);if(c.etaTimer)k.set("etaTimer","#your-next-media .song { top: 8px!important; }");else{k.unset("etaTimer");a=b("#dj-button").find("span");
if(0>API.getWaitListPosition()){a.html(50>API.getWaitList().length?u.dj.waitJoin:u.dj.waitFull);break}a.html(u.dj.waitLeave)}break;case "language":console.log("Language click");break;default:API.chatLog(f.i18n("error.unknownMenuKey",a));return}c.save()},createMenu:function(){null!=v&&v.remove();v=b("<div>").css("left",this.shown?0:-500).attr("id","p3-settings");var e=b("<div>").addClass("header"),k=b("<div>").addClass("container");e.append(b("<div>").addClass("back").append(b("<i>").addClass("icon icon-arrow-left")).click(function(){x.toggleMenu(!1)}));
e.append(b("<div>").addClass("title").append(b("<i>").addClass("icon icon-settings-white")).append(b("<span>plug&#179;</span>")).append(b("<span>").addClass("version").text(a)));k.append(b("<div>").addClass("section").text("Features"));!1!==m.rules.allowAutowoot&&k.append(d(c.autowoot,"woot",f.i18n("menu.autowoot")));!1!==m.rules.allowAutojoin&&k.append(d(c.autojoin,"join",f.i18n("menu.autojoin")));!1!==m.rules.allowAutorespond&&(k.append(d(c.autorespond,"autorespond",f.i18n("menu.autorespond"))),
k.append(b('<div class="item">').addClass("p3-s-autorespond-input").append(b("<input>").val(""===c.awaymsg?f.i18n("autorespond.default"):c.awaymsg).keyup(function(){b(this).val(b(this).val().split("@").join(""));c.awaymsg=b(this).val().trim();c.save()})).mouseover(function(){g.runLite||l.trigger("tooltip:show",f.i18n("tooltip.afk"),b(this),!1)}).mouseout(function(){g.runLite||l.trigger("tooltip:hide")})));(g.isPlugCubedDeveloper()||API.hasPermission(void 0,API.ROLE.BOUNCER))&&k.append(d(c.moderation.afkTimers,
"afktimers",f.i18n("menu.afktimers")));m.haveRoomSettings&&k.append(d(null!=c.useRoomSettings[window.location.pathname.split("/")[1]]?c.useRoomSettings[window.location.pathname.split("/")[1]]:!0,"roomsettings",f.i18n("menu.roomsettings")));k.append(d(c.etaTimer,"etatimer",f.i18n("menu.etatimer")));k.append(d(c.chatImages,"chatimages",f.i18n("menu.chatimages")));k.append(d(c.twitchEmotes,"twitchemotes",f.i18n("menu.twitchemotes")));k.append(d(!1,"colors",f.i18n("menu.customchatcolors")+"..."));(g.isPlugCubedDeveloper()||
g.isPlugCubedAmbassador())&&k.append(d(!1,"controlpanel",f.i18n("menu.controlpanel")+"..."));k.append(b('<div class="spacer">').append(b('<div class="divider">')));k.append(b('<div class="section">'+f.i18n("notify.header")+"</div>"));k.append(d((c.notify&h.USER_JOIN)===h.USER_JOIN,"notify-join",f.i18n("notify.join")).data("bit",h.USER_JOIN));k.append(d((c.notify&h.USER_LEAVE)===h.USER_LEAVE,"notify-leave",f.i18n("notify.leave")).data("bit",h.USER_LEAVE));k.append(d((c.notify&h.USER_GRAB)===h.USER_GRAB,
"notify-grab",f.i18n("notify.grab")).data("bit",h.USER_GRAB));k.append(d((c.notify&h.USER_MEH)===h.USER_MEH,"notify-meh",f.i18n("notify.meh")).data("bit",h.USER_MEH));k.append(d((c.notify&h.SONG_STATS)===h.SONG_STATS,"notify-stats",f.i18n("notify.stats")).data("bit",h.SONG_STATS));k.append(d((c.notify&h.SONG_UPDATE)===h.SONG_UPDATE,"notify-updates",f.i18n("notify.updates")).data("bit",h.SONG_UPDATE));if(API.hasPermission(void 0,API.ROLE.BOUNCER)||g.isPlugCubedDeveloper()){var n=new p(5,30,c.notifySongLength,
function(a){c.notifySongLength=a;c.save();b(".p3-s-notify-songLength").find("span").text(f.i18n("notify.songLength",a))});k.append(d((c.notify&h.SONG_HISTORY)===h.SONG_HISTORY,"notify-history",f.i18n("notify.history")).data("bit",h.SONG_HISTORY).data("perm",API.ROLE.BOUNCER));k.append(d((c.notify&h.SONG_LENGTH)===h.SONG_LENGTH,"notify-songLength",f.i18n("notify.songLength",c.notifySongLength)).data("bit",h.SONG_LENGTH).data("perm",API.ROLE.BOUNCER));k.append(n.$slider.css("left",40))}w=b("<div>").attr("id",
"p3-settings-wrapper");b("body").append(w.append(v.append(e).append(k)));if(null!=n)n.onChange()},toggleMenu:function(a){null==v&&this.createMenu();(this.shown=null==a?!this.shown:a)||n.hide();v.animate({left:this.shown?0:-500},{complete:function(){x.shown||(v.detach(),v=void 0)}})}}))});
define("d2154c/e00995/c41301",["jquery","d2154c/e46bab","d2154c/f74646","d2154c/e2f884"],function(b,e,a,h){var c=[["/badges (commands.variables.on/commands.variables.off)","commands.descriptions.badges"],["/join","commands.descriptions.join"],["/leave","commands.descriptions.leave"],["/whoami","commands.descriptions.whoami"],["/mute","commands.descriptions.mute"],["/automute","commands.descriptions.automute"],["/unmute","commands.descriptions.unmute"],["/nextsong","commands.descriptions.nextsong"],
["/refresh","commands.descriptions.refresh"],["/status","commands.descriptions.status"],["/alertson (commands.variables.word)","commands.descriptions.alertson"],["/alertsoff","commands.descriptions.alertsoff"],["/grab","commands.descriptions.grab"],["/getpos","commands.descriptions.getpos"],["/version","commands.descriptions.version"],["/commands","commands.descriptions.commands"],["/link","commands.descriptions.link"],["/volume (commands.variables.number/+/-)"]],g=[["/whois (commands.variables.username)",
"commands.descriptions.whois",API.ROLE.BOUNCER],["/skip","commands.descriptions.skip",API.ROLE.BOUNCER],["/ban (commands.variables.username)","commands.descriptions.ban",API.ROLE.BOUNCER],["/lockskip","commands.descriptions.lockskip",API.ROLE.MANAGER],["/lock","commands.descriptions.lock",API.ROLE.MANAGER],["/unlock","commands.descriptions.unlock",API.ROLE.MANAGER],["/add (commands.variables.username)","commands.descriptions.add",API.ROLE.BOUNCER],["/remove (commands.variables.username)","commands.descriptions.remove",
API.ROLE.BOUNCER],["/strobe (commands.variables.on/commands.variables.off)","commands.descriptions.strobe",API.ROLE.COHOST],["/rave (commands.variables.on/commands.variables.off)","commands.descriptions.rave",API.ROLE.COHOST],["/whois all","commands.descriptions.whois",API.ROLE.AMBASSADOR],["/banall","commands.descriptions.banall",API.ROLE.AMBASSADOR]];return new (e.extend({userCommands:function(){var b='<strong style="position:relative;left:-20px">=== '+a.i18n("commands.userCommands")+" ===</strong><br>",
e;for(e in c)if(c.hasOwnProperty(e)){var g=c[e][0];if(1<g.split("(").length&&1<g.split(")").length){var h=g.split("(")[1].split(")")[0].split("/"),g=g.split("(")[0]+"<em>",n;for(n in h)h.hasOwnProperty(n)&&(g="+"==h[n]||"-"==h[n]?g+h[n]:g+a.i18n(h[n]));g+="</em>"}b+='<div style="position:relative;left:-10px">'+g+'<br><em style="position:relative;left:10px">'+a.i18n(c[e][1])+"</em></div>"}return b},modCommands:function(){var b='<br><strong style="position:relative;left:-20px">=== '+a.i18n("commands.modCommands")+
" ===</strong><br>",c;for(c in g)if(g.hasOwnProperty(c)&&API.hasPermission(void 0,g[c][2])){var e=g[c][0];if(1<e.split("(").length){var h=e.split("(")[1].split(")")[0].split("/"),e=e.split("(")[0]+"<em>",n;for(n in h)h.hasOwnProperty(n)&&(e="+"==h[n]||"-"==h[n]?e+h[n]:e+a.i18n(h[n]));e+="</em>"}b+='<div style="position:relative;left:-10px">'+e+'<br><em style="position:relative;left:10px">'+a.i18n(g[c][1])+"</em></div>"}return b},print:function(){var b='<strong style="font-size:1.4em;position:relative;left: -20px">'+
a.i18n("commands.header")+"</strong><br>",b=b+this.userCommands();API.hasPermission(void 0,API.ROLE.BOUNCER)&&(b+=this.modCommands());h.chatLog(void 0,b,void 0,-1)}}))});
define("d2154c/c41231/bbf53d","d2154c/c41231/c49db9 d2154c/e2f884 d2154c/f74646 d2154c/e00995/c41301 d2154c/bd484b d2154c/e4e56f d2154c/c13da7 d2154c/eda6bf d2154c/c6f256/bb3fd9 d2154c/c6f256/ac60c3".split(" "),function(b,e,a,h,c,g,f,k,m,p){var n;return new (b.extend({trigger:API.CHAT_COMMAND,handler:function(b){var l,q=b.split(" "),r=q.shift().substr(1);if(e.hasPermission(void 0,2,!0)||e.isPlugCubedDeveloper()||e.isPlugCubedAmbassador()){if(e.equalsIgnoreCase(r,"whois")){0<q.length&&e.equalsIgnoreCase(q[0],
"all")?e.getAllUsers():e.getUserInfo(q.join(" "));return}if(API.hasPermission(void 0,API.ROLE.MANAGER)&&e.equalsIgnoreCase(r,"banall")){b=API.getUser();q=API.getUsers();for(l in q)q.hasOwnProperty(l)&&q[l].id!==b.id&&API.moderateBanUser(q[l].id,0,API.BAN.PERMA);return}}if(API.hasPermission(void 0,API.ROLE.COHOST)||e.isPlugCubedDeveloper()||e.isPlugCubedSponsor()){if(e.equalsIgnoreCase(r,"strobe")){if(g.getState()!==SockJS.OPEN)return API.chatLog(a.i18n("error.notConnected"),!0);g.send(JSON.stringify({type:"room:rave",
value:-1<b.indexOf(a.i18n("commands.variables.off"))?0:0<q.length&&e.isNumber(q[1])&&50<=~~q[1]&&100>=~~q[1]?~~q[1]:1}));return}if(e.equalsIgnoreCase(r,"rave")){if(g.getState()!==SockJS.OPEN)return API.chatLog(a.i18n("error.notConnected"),!0);g.send(JSON.stringify({type:"room:rave",value:-1<b.indexOf(a.i18n("commands.variables.off"))?0:2}));return}}if(API.hasPermission(void 0,API.ROLE.MANAGER)){if(e.equalsIgnoreCase(r,"lock")){API.moderateLockWaitList(!0,!1);return}if(e.equalsIgnoreCase(r,"unlock")){API.moderateLockWaitList(!1,
!1);return}if(e.equalsIgnoreCase(r,"lockskip")){var u=API.getDJ().id;API.once(API.ADVANCE,function(){API.once(API.WAIT_LIST_UPDATE,function(){API.moderateMoveDJ(u,1)});API.moderateAddDJ(u)});API.moderateForceSkip();return}}if(API.hasPermission(void 0,API.ROLE.BOUNCER)){if(e.equalsIgnoreCase(r,"skip")){if(null==API.getDJ())return;5<b.length&&API.sendChat("@"+API.getDJ().username+" - Reason for skip: "+b.substr(5).trim());API.moderateForceSkip();return}if(e.equalsIgnoreCase(r,"whois")){e.getUserInfo(q.join(" "));
return}if(e.equalsIgnoreCase(r,"add")){this.moderation(q.join(" "),"adddj");return}if(e.equalsIgnoreCase(r,"remove")){this.moderation(q.join(" "),"removedj");return}}if(e.equalsIgnoreCase(r,"commands"))h.print();else if(e.equalsIgnoreCase(r,"badges"))k.unset("hide-badges"),0<q.length&&e.equalsIgnoreCase(q[0],a.i18n("commands.variables.off"))&&k.set("hide-badges","#chat .msg { padding: 5px 8px 6px 8px; } #chat-messages .badge-box { display: none; }");else if(e.equalsIgnoreCase(r,"join"))API.djJoin();
else if(e.equalsIgnoreCase(r,"leave"))API.djLeave();else if(e.equalsIgnoreCase(r,"whoami"))e.getUserInfo(API.getUser().id);else if(e.equalsIgnoreCase(r,"refresh"))$("#refresh-button").click();else if(e.equalsIgnoreCase(r,"volume"))0<q.length&&(e.isNumber(q[0])?API.setVolume(~~q[0]):"+"==q[0]?API.setVolume(API.getVolume()+1):"-"==q[0]&&API.setVolume(API.getVolume()-1));else if(e.equalsIgnoreCase(r,"version"))API.chatLog(a.i18n("running",f));else if(e.equalsIgnoreCase(r,"mute"))0!==API.getVolume()&&
p.mute();else if(e.equalsIgnoreCase(r,"unmute"))0<API.getVolume()||p.unmute();else if(e.equalsIgnoreCase(r,"muteonce"))0!==API.getVolume()&&p.muteOnce();else if(e.equalsIgnoreCase(r,"easteregg"))(function(){var a=$(document).width(),b=$(document).height(),c=$("#chat"),e=$("#playback-controls");$("#playback-container").width(a-c.width()).height(b-$(".app-header").height()-$("#footer").height());e.css("left",(a-c.width()-e.width())/2+"px");$("#playback").css({left:9,"z-index":6})})();else if(e.equalsIgnoreCase(r,
"link"))API.sendChat("plugCubed : http://plugcubed.net");else if(e.equalsIgnoreCase(r,"status"))e.statusREST(function(b,c,f){e.chatLog(void 0,a.i18n("commands.responses.status.rest",b,c,f),200==b?"00FF00":"FF0000",-1)}),e.statusSocket(function(b,c,f){e.chatLog(void 0,a.i18n("commands.responses.status.socket",b,c,f),1E3==b?"00FF00":"FF0000",-1)});else if(e.equalsIgnoreCase(r,"nextsong")){l=API.getNextMedia();if(null==l)return API.chatLog(a.i18n("error.noNextSong"));l=l.media;b=require("d2154c/eb7ff4/d10039").isInHistory(l.id);
API.chatLog(a.i18n("commands.responses.nextsong",l.title,l.author));-1<b.pos&&!b.skipped&&API.chatLog(a.i18n("commands.responses.isHistory",b.pos,b.length),!0)}else if(e.equalsIgnoreCase(r,"automute"))l=API.getMedia(),null!=l&&(0>c.registeredSongs.indexOf(l.id)?(c.registeredSongs.push(l.id),p.muteOnce(),API.chatLog(a.i18n("commands.responses.automute.registered",l.title))):(c.registeredSongs.splice(c.registeredSongs.indexOf(l.id),1),p.unmute(),API.chatLog(a.i18n("commands.responses.automute.unregistered",
l.title))),c.save());else if(e.equalsIgnoreCase(r,"getpos"))l=e.getUser(b.substr(8)),l=null===l?API.getUser():l,b=API.getWaitListPosition(l.id),API.getDJ().id===l.id?API.chatLog(a.i18n("info.userDjing",l.id===API.getUser().id?a.i18n("ranks.you"):e.cleanTypedString(l.username))):0===b?API.chatLog(a.i18n("info.userNextDJ",l.id===API.getUser().id?a.i18n("ranks.you"):e.cleanTypedString(l.username))):0<b?API.chatLog(a.i18n("info.inWaitlist",b+1,API.getWaitList().length)):API.chatLog(a.i18n("info.notInList"));
else if(e.equalsIgnoreCase(r,"grab")){if(e.runLite)return API.chatLog(a.i18n("error.noLiteSupport"),!0);$.getJSON("https://plug.dj/_/playlists",function(b){if("ok"!==b.status)API.chatLog(a.i18n("error.errorGettingPlaylistInfo"),!0);else{var c=b.data;if(!(1>c.length))for(var e in c)if(c.hasOwnProperty(e)&&(b=c[e],b.active)){200>b.count?(e=require("c84be/e76ad/c9bc4").get("historyID"),c=require("c84be/ad464/c2beb"),m.dispatch(new c(c.GRAB,b.id,e))):API.chatLog(a.i18n("error.yourActivePlaylistIsFull"),
!0);return}API.chatLog(a.i18n("error.noPlaylistsFound"),!0)}}).fail(function(){API.chatLog(a.i18n("error.errorGettingPlaylistInfo"),!0)})}else if(e.startsWithIgnoreCase(b,"/alertson ")&&!e.equalsIgnoreCaseTrim(b,"/alertson"))c.alertson=b.substr(10).split(" "),c.save(),API.chatLog(a.i18n("commands.responses.alertson",c.alertson.join(", ")));else if(e.equalsIgnoreCaseTrim(b,"/alertson")||e.startsWithIgnoreCase(b,"/alertsoff"))c.alertson=[],c.save(),API.chatLog(a.i18n("commands.responses.alertsoff"));
else if(e.startsWithIgnoreCase(b,"/msg ")||e.startsWithIgnoreCase(b,"/pm ")){if(g.getState()!==SockJS.OPEN)return API.chatLog(a.i18n("error.notConnected"),!0);l=e.getUser(b.split(" ")[1]);null!==l?(g.send(JSON.stringify({type:"chat:private",value:{id:l.id,message:b.substr(b.indexOf(l.username)+l.username.length+1)}})),n=l):API.chatLog(a.i18n("error.usernameNotFound"),!0)}else if(e.startsWithIgnoreCase(b,"/r ")){if(g.getState()!==SockJS.OPEN)return API.chatLog(a.i18n("error.notConnected"),!0);null!=
n&&null!=API.getUser(n.id)?g.send(JSON.stringify({type:"chat:private",value:{id:n.id,message:b.substr(3)}})):API.chatLog(a.i18n("error.canNotFindTheLastPMReceiver"),!0)}}}))});define("d2154c/fe943a/ed8d08",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884"],function(b,e,a){return new (b.extend({trigger:"chat",handler:function(b){for(var c in e.alertson)if(e.alertson.hasOwnProperty(c)&&-1<b.message.indexOf(e.alertson[c])){a.playChatSound();break}}}))});
define("d2154c/fe943a/e05e5c","d2154c/c41231/c49db9 d2154c/bd484b d2154c/a7dd4b d2154c/f74646 d2154c/e2f884 d2154c/e00995/eaae4d".split(" "),function(b,e,a,h,c,g){var f;f=function(){var a=API.getDJ();null!==a&&a.id==API.getUser().id||-1<API.getWaitListPosition()||50==API.getWaitList().length||$("#dj-button").click()};return new (b.extend({lastPosition:API.getWaitListPosition(),trigger:{advance:"onDjAdvance",waitListUpdate:"onWaitListUpdate",chat:"onChat"},onDjAdvance:function(b){this.lastDJ=null!=
b.lastPlay.dj?b.lastPlay.dj.id:null;e.autojoin&&a.rules.allowAutojoin&&f()},onWaitListUpdate:function(){var a=this.lastPosition;this.lastPosition=API.getWaitListPosition();if(e.autojoin){var b=API.getDJ();!(null!==b&&b.id===API.getUser().id||-1<this.lastPosition||50==API.getWaitList().length||this.lastDJ==API.getUser().id)&&-1<a&&(e.autojoin=!1,g.setEnabled("join",e.autojoin))}},onChat:function(b){if(!1!==a.rules.allowAutojoin&&e.autojoin){var f,p;f="mention"==b.type&&API.hasPermission(b.fromID,API.ROLE.BOUNCER);
p=0>b.message.indexOf("@")&&(API.hasPermission(b.fromID,API.ROLE.MANAGER)||c.isPlugCubedDeveloper(b.fromID));(f||p)&&-1<b.message.indexOf("!joindisable")&&(e.autojoin=!1,g.setEnabled("join",e.autojoin),e.save(),API.sendChat(h.i18n("autojoin.commandDisable","@"+b.un)))}}}))});
define("d2154c/fe943a/ce0438",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/f74646","d2154c/c6f256/ac60c3"],function(b,e,a,h){return new (b.extend({trigger:"advance",handler:function(b){b&&b.media&&-1<e.registeredSongs.indexOf(b.media.id)&&(setTimeout(function(){h.muteOnce()},800),API.chatLog(a.i18n("commands.responses.automute.automuted",b.media.title)))}}))});
define("d2154c/fe943a/e17719","d2154c/c41231/c49db9 d2154c/f74646 d2154c/bd484b d2154c/a7dd4b d2154c/e2f884 d2154c/c6f256/ac60c3 d2154c/e00995/eaae4d lang/Lang".split(" "),function(b,e,a,h,c,g,f,k){return new (b.extend({trigger:"chat",handler:function(b){if(!1!==h.rules.allowAutorespond&&a.autorespond){var g=this,n="mention"==b.type&&API.hasPermission(b.fromID,API.ROLE.BOUNCER),t=0>b.message.indexOf("@")&&(API.hasPermission(b.fromID,API.ROLE.MANAGER)||c.isPlugCubedDeveloper(b.fromID));(n||t)&&-1<
b.message.indexOf("!afkdisable")?(a.autorespond=!1,f.setEnabled("autorespond",a.autorespond),a.save(),API.sendChat(e.i18n("autorespond.commandDisable","@"+b.un)),$("#chat-input-field").removeAttr("disabled").attr("placeholder",k.chat.placeholder),null!=this.timeoutId&&clearTimeout(this.timeoutId)):"mention"==b.type&&a.autorespond&&!a.recent&&(a.recent=!0,$("#chat-input-field").attr("placeholder",e.i18n("autorespond.nextIn",c.getTimestamp(Date.now()+18E4))),this.timeoutId=setTimeout(function(){$("#chat-input-field").attr("placeholder",
e.i18n("autorespond.next"));a.recent=!1;a.save();g.timeoutId=null},18E4),API.sendChat("[AFK] @"+b.un+" "+a.awaymsg.split("@").join("")))}},close:function(){this._super();a.autorespond&&$("#chat-input-field").removeAttr("disabled").attr("placeholder",k.chat.placeholder)}}))});
define("d2154c/fe943a/e062a0",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/a7dd4b","d2154c/e2f884"],function(b,e,a,h){var c;c=function(){var a=API.getDJ();null!==a&&a.id!==API.getUser().id&&$("#woot").click()};return new (b.extend({trigger:"advance",handler:function(b){b.media&&e.autowoot&&a.rules.allowAutowoot&&setTimeout(function(){c()},1E3*h.randomRange(1,10))}}))});
define("d2154c/fe943a/bcdd6b",["jquery","d2154c/e46bab","d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884"],function(b,e,a,h,c){var g=new (e.extend({init:function(){this.current={waitList:[],dj:-1};this.last={waitList:[],dj:-1};this.state=0},setWaitList:function(a){this.current.waitList=[];for(var b in a)a.hasOwnProperty(b)&&this.current.waitList.push(a[b].id);this.incrementState()},setDJ:function(a){this.current.dj=a?a.id:-1;this.incrementState()},incrementState:function(){this.state++;1<this.state&&
(this.last=this.current,this.current={waitList:[],dj:-1},this.state=0)}}));return new (a.extend({trigger:{userJoin:"onUserJoin",userLeave:"onUserLeave",voteUpdate:"onVoteUpdate",advance:"onDjAdvance",waitListUpdate:"onWaitListUpdate"},onUserJoin:function(a){0===c.getUserData(a.id,"joinTime",0)&&c.setUserData(a.id,"joinTime",Date.now())},onUserLeave:function(a){var b=c.getUserData(a.id,"disconnects",{count:0});b.count++;b.position=g.last.dj===a.id?0:0>g.last.waitList.indexOf(a.id)?-1:g.last.waitList.indexOf(a.id)+
1;b.time=Date.now();c.setUserData(a.id,"disconnects",b);this.onVoteUpdate({user:{id:a.id},vote:0})},onVoteUpdate:function(a){if(a&&a.user){var b,e;b=c.getUserData(a.user.id,"curVote",0);e=c.getUserData(a.user.id,"wootcount",0)-(1===b?1:0)+(1===a.vote?1:0);b=c.getUserData(a.user.id,"mehcount",0)-(-1===b?1:0)+(1===a.vote?1:0);c.setUserData(a.user.id,"wootcount",e);c.setUserData(a.user.id,"mehcount",b);c.setUserData(a.user.id,"curVote",a.vote)}},onDjAdvance:function(a){null!=a.media&&g.setDJ(a.dj);a=
API.getUsers();for(var b in a)a.hasOwnProperty(b)&&c.setUserData(a[b].id,"curVote",0)},onWaitListUpdate:function(a){g.setWaitList(a)}}))});
define("d2154c/fe943a/fd39c6",["d2154c/c41231/c49db9","d2154c/bd484b","d2154c/e2f884"],function(b,e,a){var h,c;a.runLite||(h=require("c84be/cfd90/a6e63"),c=require("c84be/e76ad/c9bc4"));return new (b.extend({trigger:"advance",register:function(){this._super();this.titlePrefix=this.titleClean=this.title="";if(!a.runLite)c.on("change:streamDisabled change:volume change:muted",this.onStreamChange,this);this.onStreamChange()},close:function(){this._super();this.intervalID&&clearInterval(this.intervalID);
document.title=a.getRoomName();a.runLite||c.off("change:streamDisabled change:volume change:muted",this.onStreamChange,this)},handler:function(b){if(e.songTitle&&b.media&&b.media.title){if(this.titlePrefix=(0<API.getVolume()&&(a.runLite||!a.runLite&&!h.settings.streamDisabled)?"â–¶":"âšâš")+"â€„",this.titleClean!==b.media.author+" - "+b.media.title+" :: "+a.getRoomName()+" :: "){this.intervalID&&clearInterval(this.intervalID);this.titleClean=b.media.author+" - "+b.media.title+" :: "+a.getRoomName()+" :: ";
this.title=(this.titlePrefix+this.titleClean).split(" ").join("â€„");document.title=this.title;var c=this;this.intervalID=setInterval(function(){c.onIntervalTick()},300)}}else this.intervalID&&clearInterval(this.intervalID),document.title=a.getRoomName()},onIntervalTick:function(){var a=this.title.substr(this.titlePrefix.length),a=a.substr(1)+a.substr(0,1);this.title=this.titlePrefix+a;document.title=this.title},onStreamChange:function(){this.handler({media:API.getMedia()})}}))});
define("d2154c/b8fe47","d2154c/e46bab d2154c/fe943a/ed8d08 d2154c/fe943a/e05e5c d2154c/fe943a/ce0438 d2154c/fe943a/e17719 d2154c/fe943a/e062a0 d2154c/fe943a/bcdd6b d2154c/fe943a/fd39c6".split(" "),function(){var b;b=$.makeArray(arguments);return new (b.shift().extend({register:function(){this.unregister();for(var e in b)b.hasOwnProperty(e)&&!b[e].registered&&b[e].register()},unregister:function(){for(var e in b)b.hasOwnProperty(e)&&b[e].registered&&b[e].close()}}))});
define("d2154c/c41231/a7a551",["jquery","d2154c/e46bab"],function(b,e){return e.extend({tickTime:1E3,closed:!1,init:function(){this.proxy=b.proxy(this.handler,this);this.proxy()},handler:function(){this.tick();this.closed||(this.timeoutID=setTimeout(this.proxy,this.tickTime))},tick:function(){},close:function(){clearTimeout(this.timeoutID);this.closed=!0}})});define("d2154c/c6f256/cb566a",["d2154c/e2f884"],function(b){return b.runLite?{_byId:{}}:require("c84be/c0186/a0040")});
define("d2154c/bffb94/f84d49","jquery d2154c/c41231/a7a551 d2154c/c6f256/cb566a d2154c/bd484b d2154c/e2f884 d2154c/f74646".split(" "),function(b,e,a,h,c,g){return e.extend({tickTime:1E3,tick:function(){if(h.moderation.afkTimers&&(c.isPlugCubedDeveloper()||API.hasPermission(void 0,API.ROLE.BOUNCER))&&b("#waitlist-button").hasClass("selected"))for(var e=API.getWaitList(),k=b("#waitlist").find(".user"),m=0;m<e.length;m++){var p,n;p=Date.now()-c.getUserData(e[m].id,"lastChat",c.getUserData(e[m].id,"joinTime",
Date.now()));p=!0===a._byId[e[m].id]?g.i18n("error.ignoredUser"):c.getTimestamp(p,36E5>p?"mm:ss":"hh:mm:ss");n=b(k[m]).find(".afkTimer");1>n.length&&(n=b("<div>").addClass("afkTimer"),b(k[m]).find(".meta").append(n));n.text(p)}},close:function(){this._super();b("#waitlist").find(".user .afkTimer").remove()}})});
define("d2154c/bffb94/ee8df7","jquery d2154c/c41231/a7a551 d2154c/bd484b d2154c/e2f884 d2154c/f74646 lang/Lang".split(" "),function(b,e,a,h,c,g){var f;try{f=e.extend({tickTime:1E3,init:function(){this.myID=API.getUser().id;this.$span=null;b("#your-next-media").find("span:first").removeClass("song").addClass("song");this._super()},createElement:function(){this.$span=b('<span class="eta dark-label">').css({"font-size":"14px",top:"28px"});b("#your-next-media").append(this.$span)},tick:function(){if(a.etaTimer)if(null==
this.$span&&this.createElement(),null==API.getDJ())this.$span.text(c.i18n("eta.boothAvailable"));else{if(null!=API.getHistory()){var e,f,k,t,l;e=null!=API.getDJ()&&API.getDJ().id==this.myID;f=API.getWaitListPosition();k=0;t=API.getHistory();l=b("#dj-button").find("span");for(var q in t)t.hasOwnProperty(q)&&(k+=null==t[q].info||0===t[q].info.duration?240:t[q].info.duration);k=Math.round(k/t.length);e?this.$span.text(c.i18n("eta.alreadyDJ")):0>f?(e=h.formatTime(API.getWaitList().length*k+API.getTimeRemaining()),
this.$span.text(c.i18n("eta.joinTime",e)),l.html((50>API.getWaitList().length?g.dj.waitJoin:g.dj.waitFull)+'<br><small class="dark-label">'+e+"</small>")):(e=h.formatTime(f*k+API.getTimeRemaining()),this.$span.text(c.i18n("eta.waitListTime",f+1,API.getWaitList().length,e),10),l.html(g.dj.waitLeave+'<br><small class="dark-label">'+(f+1)+"/"+API.getWaitList().length+" ("+e+")</small>"))}}else null!=this.$span&&(this.$span.remove(),this.$span=null)},close:function(){null!=this.$span&&(this.$span.remove(),
this.$span=null);this._super();b("#your-next-media").find(".song").removeClass("song")}})}catch(k){console.log("Error while creating ETATimer"),console.log(k)}return f});
define("d2154c/bffb94/c0e78a",["d2154c/c41231/a7a551","d2154c/c6f256/bb3fd9"],function(b,e){return b.extend({tickTime:1E4,tick:function(){var a=e._events["chat:receive"].concat(API._events[API.CHAT]),b=function(){API.chatLog("plugCubed does not support one or more of the other scripts that are currently running because of potential dangerous behaviour",!0);plugCubed.close()},c;for(c in a)if(a.hasOwnProperty(c)){var g=a[c].callback.toString();if(function(a){for(var b in a)if(a.hasOwnProperty(b)&&-1<
g.indexOf(a[b]))return!0;return!1}(["API.djLeave","API.djJoin","API.moderateLockWaitList","API.moderateForceSkip",".getScript("])){b();return}}"function"===typeof startWooting&&-1<startWooting.toString().indexOf("API.sendChat(")&&b()}})});
define("d2154c/bffb94/d0570c",["jquery","d2154c/c41231/a7a551"],function(b,e){return e.extend({tickTime:1E4,tick:function(){var a=b("#yt-frame"),e,c=!0,g=!0;e=null==a.height()||230<a.height();null!=a.width()&&(c=412<a.width(),g=0<=a[0].offsetLeft+a[0].offsetWidth&&0<=a[0].offsetTop+a[0].offsetHeight&&a[0].offsetLeft<window.innerWidth&&a[0].offsetTop<window.innerHeight);a=0===a.length||1===parseFloat(a.css("opacity"));e&&c&&g&&a||(API.chatLog("plugCubed does not support hiding video or scripts supporting hiding of the video",
!0),plugCubed.close())}})});define("d2154c/fb8876",["d2154c/e46bab","d2154c/bffb94/f84d49","d2154c/bffb94/ee8df7","d2154c/bffb94/c0e78a","d2154c/bffb94/d0570c"],function(){var b,e,a;b=$.makeArray(arguments);e=b.shift();a=[];return new (e.extend({register:function(){this.unregister();for(var e in b)b.hasOwnProperty(e)&&(a[e]=new b[e])},unregister:function(){for(var b in a)a.hasOwnProperty(b)&&a[b].close()}}))});
define("d2154c/e00995/cf07f4/ac2fb4",["d2154c/e46bab","d2154c/e00995/c2bcd9","d2154c/eda6bf","d2154c/a7dd4b"],function(b,e,a,h){var c,g,f,k,m;return new (b.extend({register:function(){m=e.addPanel("Background");c=$("<div>").append($("<p>").text("Set your own room background."));m.addContent(c);g=$("<div>").width(500).css("margin","25px auto auto auto");window.File&&window.FileReader&&window.FileList&&window.Blob?(f=e.inputField("file",void 0,"Local file").change(function(b){for(var c=b.target.files,
e=0;b=c[e];e++)if(b.type.match("image.*")){c=new FileReader;c.onload=function(b){a.set("room-settings-background-image",".room-background { background-image: url("+b.target.result+")!important; }")};c.readAsDataURL(b);k.changeSubmit(!0);return}k.changeSubmit(!1)}),k=e.button("Clear",!1,function(){h.execute();k.changeSubmit(!1)}),g.append(f.getJQueryElement()).append(k.getJQueryElement())):g.append("Sorry, your browser does not support this");m.addContent(g)},close:function(){e.removePanel(m);c=g=
f=m=null}}))});define("d2154c/e00995/cf07f4/d85c03",["d2154c/e46bab","d2154c/e00995/c2bcd9"],function(b,e){var a,h;return new (b.extend({register:function(){h=e.addPanel("Notifications");a=$("<div>").append($("<p>").text("Control which notifications you want and how you want them."));h.addContent(a)},close:function(){e.removePanel(h)}}))});
define("d2154c/e00995/cf07f4/e36486",["d2154c/e46bab","d2154c/e00995/c2bcd9","d2154c/e4e56f"],function(b,e,a){var h,c,g,f,k;return new (b.extend({register:function(){function a(){$.ajax({dataType:"json",url:"https://login.plugcubed.net/check",xhrFields:{withCredentials:!0}}).done(function(a){h=a.loggedIn;g.changeLabel(h?"Already logged in":"Login");g.changeSubmit(!h)}).error(function(){h=!1;g.changeLabel("Login");g.changeSubmit(!0)})}k=e.addPanel("Login");f=$("<div>").append($("<p>").text("Login to your plugCubed account.")).append($("<p>").text("Using this system, you can validate and lock your userIDs to your plugCubed account."));
k.addContent(f);g=e.button(h?"Already logged in":"Login",!h,function(){if(!h){g.changeLabel("Please wait");var b=window.open("https://login.plugcubed.net","p3Login_"+Date.now(),"height=200,width=520,toolbar=0,scrollbars=0,status=0,resizable=0,location=1,menubar=0");(function(){var c=function(){b.closed?a():setTimeout(function(){c()},500)};setTimeout(function(){c()},1E3)})()}});a();c=$("<div>").width(500).css("margin","25px auto auto auto").append(g.getJQueryElement());k.addContent(c)},close:function(){e.removePanel(k)}}))});
define("d2154c/e00995/cf07f4/e2302c",["d2154c/e46bab","d2154c/e00995/cf07f4/ac2fb4","d2154c/e00995/cf07f4/d85c03","d2154c/e00995/cf07f4/e36486"],function(){var b;b=$.makeArray(arguments);return new (b.shift().extend({register:function(){this.unregister();for(var e in b)b.hasOwnProperty(e)&&!b[e].registered&&b[e].register()},unregister:function(){for(var e in b)b.hasOwnProperty(e)&&b[e].registered&&b[e].close()}}))});
define("d2154c/cbff68/d22155",["jquery","d2154c/f74646","d2154c/e2f884","d2154c/c6f256/bb3fd9"],function(b,e,a,h){return a.runLite?null:require("c84be/c1f5e/a3af9/e3ea6/b0d8d").extend({vote:function(){this.model.get("grab")||0!==this.model.get("vote")?(this.$icon||(this.$icon=b("<i>").addClass("icon"),this.$el.append(this.$icon)),this.model.get("grab")?this.$icon.removeClass().addClass("icon icon-grab"):1==this.model.get("vote")?this.$icon.removeClass().addClass("icon icon-woot"):this.$icon.removeClass().addClass("icon icon-meh")):
this.$icon&&(this.$icon.remove(),this.$icon=void 0);var c=this.model.get("id"),g=this.$el.find(".icon-woot,.icon-meh,.icon-grab");if(a.havePlugCubedRank(c)||a.hasPermission(c,API.ROLE.DJ)){var f=this.$el.find(".icon:not(.icon-woot,.icon-meh,.icon-grab)"),k=a.getPlugCubedSpecial(c);1>f.length&&(f=b("<i>").addClass("icon"),this.$el.append(f));a.havePlugCubedRank(c)&&f.addClass("icon-is-p3"+a.getHighestRank(c));f.mouseover(function(){h.trigger("tooltip:show",b("<span>").html(a.getAllPlugCubedRanks(c)).text(),
b(this),!0)}).mouseout(function(){h.trigger("tooltip:hide")});null!=k&&f.css("background-image",'url("https://d1rfegul30378.cloudfront.net/files/images/icons.p3special.'+k.icon+'.png")')}0<g.length&&g.mouseover(function(){h.trigger("tooltip:show",b("<span>").html(e.i18n("vote."+(g.hasClass("icon-grab")?"grab":g.hasClass("icon-woot")?"woot":"meh"))).text(),b(this),!0)}).mouseout(function(){h.trigger("tooltip:hide")})}})});
define("d2154c/c41231/cff1ce",["d2154c/e46bab"],function(b){return b.extend({init:function(){this.overridden=!1},doOverride:function(){},doRevert:function(){},override:function(){this.overridden||(this.doOverride(),this.overridden=!0)},revert:function(){this.overridden&&(this.doRevert(),this.overridden=!1)}})});
define("d2154c/a3c252",[],function(){return{manifest:{test:{dj:"abc"}},base_url:"https://localhost/",getAvatarUrl:function(b,e){return null==this.manifest[b]||null==this.manifest[b][e]?null:this.base_url+"/"+b+e+"."+this.manifest[b][e]+".png"}}});
define("d2154c/e00995/f48c70/cd40f4",["jquery","d2154c/e2f884","d2154c/a3c252"],function(b,e,a){if(!e.runLite){var h=require("c84be/e76ad/e4b11");e=require("c84be/c1f5e/e3ea6/e4b79/ca464");var c=require("hbs!templates/user/inventory/AvatarCell");return e.extend({render:function(){this.$el.html(c());this.$img=b("<img/>");this.$img.attr("src",a.getAvatarUrl(this.model,""));this.$(".avatar").append(this.$img);this.onSelected();h.on("change:avatarID",this.onSelected,this);return this},onClick:function(){this.$el.hasClass("selected")||
console.log("[p3] Change p3 avatar to "+this.model)},onSelected:function(){this.model===h.get("p3avatarID")?this.$el.addClass("selected"):this.$el.removeClass("selected")}})}});
define("d2154c/e00995/f48c70/e83370",["jquery","d2154c/e2f884","d2154c/a3c252","d2154c/e00995/f48c70/cd40f4","lang/Lang"],function(b,e,a,h,c){if(!e.runLite){b=require("c84be/c1f5e/e3ea6/e4b79/b11b5");var g=require("hbs!templates/user/inventory/Inventory"),f=require("c84be/e76ad/e4b11"),k=require("c84be/f590f/d8361");return b.extend({className:"p3",render:function(){this.$el.append(g(c));this.$(".box").jScrollPane();this.scrollPane=this.$(".box").data("jsp");f.on("change:ep change:pp",this.onChange,
this);this.onChange();this.onUpdate();this.updateAvatars()},updateAvatars:function(){this.clear();for(var b in a.manifest)if(a.manifest.hasOwnProperty(b)){var c=new h({model:a.manifest[b],blink:k.MASTER.integer(0,19)});this.$(".grid").append(c.$el);this.cells.push(c);c.render()}this.scrollPane.reinitialise()},remove:function(){f.off("change:ep change:pp",this.onChange,this);this.clear();this.$(".grid .header").remove();this.cells=void 0;delete this.cells;this.scrollPane&&this.scrollPane.destroy();
this.scrollPane=void 0;delete this.scrollPane}})}});
define("d2154c/fcb3a6/aec73f",["jquery","d2154c/c41231/cff1ce","d2154c/e00995/f48c70/e83370","d2154c/e2f884"],function(b,e,a,h){if(h.runLite)return null;var c=require("c84be/f590f/e7418"),g=require("c84be/c1f5e/e3ea6/e4b79/a5f94"),f=require("c84be/c1f5e/e3ea6/e4b79/d251f");return new (e.extend({doOverride:function(){"function"!=typeof f.prototype._render&&(f.prototype._render=f.prototype.render);f.prototype.render=function(){var a=this;this._render();b('<button class="p3">plug&#179;</button>').insertAfter(b(this.$el).find("button:first")).click(function(){a.trigger("select",
"p3")});b(this.$el).find("button").css("width",100/b(this.$el).find("button").length+"%");return this};"function"!=typeof g.prototype._onMenuSelect&&(g.prototype._onMenuSelect=g.prototype.onMenuSelect);g.prototype.onMenuSelect=function(b){console.log("Tab changing to "+b);"p3"==b?(this.clear(),this.view=new a,this.$el.append(this.view.$el),this.view.render(),this.onResize(c.getSize())):this._onMenuSelect(b)}},doRevert:function(){"function"===typeof g.prototype._onMenuSelect&&(g.prototype.onMenuSelect=
g.prototype._onMenuSelect);"function"!=typeof f.prototype._render&&(f.prototype.render=f.prototype._render)}}))});
define("d2154c/fcb3a6/bccc42",["jquery","d2154c/c41231/cff1ce","d2154c/e2f884"],function(b,e,a){if(a.runLite)return null;var h=require("c84be/c1f5e/e3ea6/dc34e");return new (e.extend({doOverride:function(){"function"!==typeof h._showSimple&&(h._showSimple=h.showSimple);"function"!==typeof h._clear&&(h._clear=h.clear);h.showSimple=function(c,e){this._showSimple(c,e);var f=a.getPlugCubedSpecial(c.id);null==this.$p3Role&&(this.$p3Role=b("<span>").addClass("p3Role"),this.$meta.append(this.$p3Role));a.havePlugCubedRank(c.id)&&
(this.$meta.addClass("has-p3Role is-p3"+a.getHighestRank(c.id)),null!=f?this.$p3Role.text(b("<span>").html(f.title).text()).css({"background-image":'url("https://d1rfegul30378.cloudfront.net/files/images/icons.p3special.'+f.icon+'.png")'}):this.$p3Role.text(b("<span>").html(a.getHighestRankString(c.id)).text()))};h.clear=function(){this._clear();this.$meta.removeClass("has-p3Role is-p3developer is-p3sponsor is-p3special is-p3ambassador is-p3donatorDiamond is-p3donatorPlatinum is-p3donatorGold is-p3donatorSilver is-p3donatorBronze")}},
doRevert:function(){"function"===typeof h._showSimple&&(h.showSimple=h._showSimple);"function"===typeof h._clear&&(h.clear=h._clear)}}))});
define("d2154c/fcb3a6/b25c9c",["jquery","d2154c/c41231/cff1ce","d2154c/e2f884"],function(b,e,a){if(a.runLite)return null;var h,c;h=require("c84be/c1f5e/a3af9/e3ea6/e74e7").prototype;c=h.onRole;return new (e.extend({doOverride:function(){h.onRole=function(){c.apply(this);4==this.model.get("role")&&this.$(".name i").removeClass().addClass("icon icon-chat-cohost")}},doRevert:function(){h.onRole=c}}))});
define("d2154c/cbff68",["d2154c/e46bab","d2154c/fcb3a6/aec73f","d2154c/fcb3a6/bccc42","d2154c/fcb3a6/b25c9c"],function(){var b;b=$.makeArray(arguments);return new (b.shift().extend({override:function(){this.revert();for(var e in b)b.hasOwnProperty(e)&&b[e].override()},revert:function(){for(var e in b)b.hasOwnProperty(e)&&b[e].revert()}}))});
define("d2154c/da0d3e","module d2154c/e46bab d2154c/d85c03 d2154c/c13da7 d2154c/eda6bf d2154c/bd484b d2154c/e2f884 d2154c/f74646 d2154c/e4e56f d2154c/a7dd4b d2154c/e00995/eaae4d d2154c/dc0fcf d2154c/c41231/dbd025 d2154c/c41231/bbf53d d2154c/b8fe47 d2154c/fb8876 d2154c/e00995/cf07f4/e2302c d2154c/cbff68/d22155 d2154c/cbff68".split(" "),function(b,e,a,h,c,g,f,k,m,p,n,t,l,q,r,u,d,w,v){function z(){f.chatLog(void 0,k.i18n("running",h)+'</span><br><span class="chat-text" style="color:#66FFFF">'+k.i18n("commandsHelp"),
g.colors.infoMessage1,-1,"plug&#179;");f.runLite&&f.chatLog(void 0,k.i18n("runningLite")+'</span><br><span class="chat-text" style="color:#FFFFFF">'+k.i18n("runningLiteInfo"),g.colors.warningMessage,-1,"plug&#179;");$("head").append('<link rel="stylesheet" type="text/css" id="plugcubed-css" href="https://d1rfegul30378.cloudfront.net/files/plugCubed.css" />');var b=API.getUsers(),c;for(c in b)b.hasOwnProperty(c)&&0>f.getUserData(b[c].id,"joinTime",-1)&&f.setUserData(b[c].id,"joinTime",Date.now());
f.runLite||(y=require("c84be/c1f5e/a3af9/e3ea6/cd6ec"),y.prototype.RowClass=w,v.override());b="regular";f.hasPermission(void 0,API.ROLE.HOST,!0)?b="admin":f.hasPermission(void 0,API.ROLE.BOUNCER,!0)?b="ambassador":f.hasPermission(void 0,API.ROLE.HOST)?b="host":f.hasPermission(void 0,API.ROLE.COHOST)?b="cohost":f.hasPermission(void 0,API.ROLE.MANAGER)?b="manager":f.hasPermission(void 0,API.ROLE.BOUNCER)?b="bouncer":f.hasPermission(void 0,API.ROLE.DJ)&&(b="residentdj");$("body").addClass("rank-"+b).addClass("id-"+
API.getUser().id);r.register();a.register();u.register();q.register();l.register();p.update();m.connect();g.load();d.register();x=!0}var x=!1,y;return e.extend({init:function(){x||("undefined"===typeof plugCubedUserData&&(plugCubedUserData={}),k.load($.proxy(z,this)))},close:function(){if(x){n.close();p.close();m.disconnect();r.unregister();a.unregister();u.unregister();d.unregister();c.destroy();l.close();q.close();f.runLite||(y.prototype.RowClass=require("c84be/c1f5e/a3af9/e3ea6/b0d8d"),v.revert());
var e=b.id.split("/")[0],g=require.s.contexts._.defined,h;for(h in g)g.hasOwnProperty(h)&&f.startsWith(h,e)&&requirejs.undef(h);$("#plugcubed-css,#p3-settings-wrapper").remove();delete plugCubed}}})});require(["d2154c/da0d3e"],function(b){plugCubed=new b});
